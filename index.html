<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Performance Evaluation</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
        integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Flatpickr CSS (for custom date picker) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://npmcdn.com/flatpickr/dist/themes/material_blue.css"> <!-- Optional Theme -->

    <style>
        /* General styles - Adjusted Font & Base */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            font-size: 10.5px; /* Slightly larger base */
            overflow: auto; /* Changed from hidden to auto for form scroll */
            min-height: 100vh;
            background-color: #ffffff; /* Default White for form */
            transition: background 0.5s ease;
            -webkit-font-smoothing: antialiased; /* Smoother fonts */
            -moz-osx-font-smoothing: grayscale;
        }

        /* --- Animated Gradient Background - Original */
        @keyframes gradientAnimation { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        body.gradient-background { background: linear-gradient(-45deg, #e0eafc, #cfdef3, #a7c5eb, #87a8d0); background-size: 400% 400%; animation: gradientAnimation 25s ease infinite; }
        /* --- End Animated Gradient --- */

        /* --- Panel Breathing Animation - Original */
        @keyframes panelBreathe { 0%, 100% { transform: scale(1) rotate(var(--initial-rotate, 0deg)); } 50% { transform: scale(1.015) rotate(var(--initial-rotate, 0deg)); } }
        /* --- End Panel Breathing --- */

        h1, h2, h3 { color: #343a40; text-align: center; }
        a { color: #007bff; text-decoration: none; transition: color 0.2s ease; }
        a:hover { text-decoration: underline; color: #0056b3; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 10px; }
        th, td { border: 1px solid #dee2e6; /* Lighter border */ padding: 8px; text-align: left; }
        th { background-color: #f8f9fa; /* Lighter header */ font-weight: 600; color: #495057; }
        .button { background-color: #007bff; color: white; padding: 10px 16px; border: none; border-radius: 5px; cursor: pointer; transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.2s ease; }
        .button:hover { background-color: #0056b3; transform: translateY(-1px); box-shadow: 0 3px 8px rgba(0, 86, 179, 0.15); }
        input[type="text"], input[type="email"], input[type="password"], textarea, select {
            width: 100%;
            padding: 9px;
            margin-bottom: 10px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            box-sizing: border-box;
            font-size: 11.5px; /* Adjusted */
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
            background-color: #fff;
            color: #333;
        }
        /* --- Flatpickr Input Style Override --- */
        input.flatpickr-input {
            background-color: #fff !important; color: #333 !important; border: 1px solid #ced4da; border-radius: 4px; padding: 9px; font-size: 11.5px; width: 100%; box-sizing: border-box; cursor: pointer;
        }
        input.flatpickr-input[readonly] { background-color: #fff !important; }
        input.flatpickr-input::placeholder { color: #888; font-style: italic; opacity: 1; }
        input.flatpickr-input:focus { border-color: #86b7fe; outline: 0; box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25) !important; }
        /* --- End Flatpickr Styles --- */

        input:focus, textarea:focus, select:focus {
            border-color: #86b7fe; outline: 0; box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25) !important;
        }
        input[readonly], textarea[readonly] { background-color: #f8f9fa; cursor: default; border-color: #dee2e6; color: #555; }
        textarea { resize: vertical; min-height: 50px; }
        .container { /* General page container */
            width: 85%; max-width: 1200px; margin: 30px auto; background-color: white; padding: 30px; border-radius: 12px; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1); position: relative; z-index: 1;
        }

        /* --- Animation/Transition Styles (Requirement II) --- */
        #welcome-page, #evaluation-page, #evaluation-form-container {
            transition: opacity 0.5s ease-in-out, transform 0.3s ease-in-out;
            /* Start pages slightly scaled down/faded for entry */
             /* opacity: 0; */ /* Start invisible, JS will handle initial display */
             /* transform: scale(0.98); */ /* Optional: start slightly smaller */
        }
        #welcome-page.visible, #evaluation-page.visible, #evaluation-form-container.visible {
            opacity: 1;
            transform: scale(1);
        }
        #login-container, #welcome-message-container {
             transition: opacity 0.4s ease-in-out, transform 0.4s ease-in-out;
        }

        /* Welcome Page Styles - Adjusted for Transitions */
        #welcome-page { position: relative; width: 100%; min-height: 100vh; overflow: hidden; display: block; /* Initially block */ }
        #login-container { background-color: rgba(255, 255, 255, 0.88); padding: 40px; border-radius: 15px; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.28); width: 400px; text-align: center; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 10; backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px); border: 1px solid rgba(255, 255, 255, 0.25); opacity: 1; /* Start visible */ }
        .login-logo { margin-bottom: 30px; } .login-logo img { max-width: 350px; height: auto; }
        .login-input-group { margin-bottom: 22px; text-align: left; } .login-input-group label { display: block; margin-bottom: 8px; font-weight: 600; color: #343a40; font-size: 15px; padding-left: 5px; }
        .login-input-group input[type="text"], .login-input-group input[type="password"] { width: 100%; padding: 13px; border: 1px solid #ced4da; border-radius: 6px; box-sizing: border-box; font-size: 14px; }
        .login-button { background-image: linear-gradient(to right, #007bff, #0056b3); color: white; padding: 14px 20px; border: none; border-radius: 6px; cursor: pointer; font-size: 17px; font-weight: 500; width: 100%; transition: all 0.3s ease; box-shadow: 0 2px 5px rgba(0, 86, 179, 0.4); display: flex; align-items: center; justify-content: center; gap: 8px; position: relative; }
        .login-button:hover { background-image: linear-gradient(to right, #0069d9, #004085); transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0, 86, 179, 0.5); }
        .login-button:active { transform: translateY(0px); box-shadow: 0 1px 3px rgba(0, 86, 179, 0.3); }
        .login-button.loading .button-text { visibility: hidden; }
        .login-button.loading .spinner { display: inline-block; }

        #login-message { margin-top: 18px; font-size: 14px; font-weight: 500; padding: 8px 12px; border-radius: 4px; display: none; align-items: center; gap: 8px; justify-content: center; }
        #login-message.error { display: flex; color: #721c24; background-color: #f8d7da; border: 1px solid #f5c6cb; }
        #login-message.success { display: flex; color: #155724; background-color: #d4edda; border: 1px solid #c3e6cb; }
        #login-message.error::before { content: "\f071"; font-family: "Font Awesome 6 Free"; font-weight: 900; }
        #login-message.success::before { content: "\f00c"; font-family: "Font Awesome 6 Free"; font-weight: 900; }

        /* Welcome Message Container (Post-Login) - Adjusted for Transitions */
        @keyframes fadeInWelcome { from { opacity: 0; transform: translate(-50%, -45%); } to { opacity: 1; transform: translate(-50%, -50%); } }
        #welcome-message-container { background-color: rgba(255, 255, 255, 0.75); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.2); padding: 45px; border-radius: 18px; text-align: center; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 5; box-shadow: 0 10px 35px rgba(31, 38, 135, 0.25); display: none; /* Starts hidden */ flex-direction: column; align-items: center; justify-content: center; height: auto; max-width: 600px; width: 90%; animation: fadeInWelcome 0.6s ease-out forwards; opacity: 0; /* Ensure animation starts from invisible */ }
        .welcome-message { font-size: 2.7em; margin-bottom: 30px; color: #2c3e50; text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1); font-weight: 600;}
        .proceed-button { padding: 16px 40px; background-image: linear-gradient(to right, #28a745, #218838); color: white; border: none; border-radius: 8px; cursor: pointer; text-decoration: none; font-size: 1.3em; font-weight: 500; transition: all 0.3s ease; box-shadow: 0 2px 5px rgba(33, 136, 56, 0.4); display: inline-flex; align-items: center; gap: 10px; }
        .proceed-button:hover { background-image: linear-gradient(to right, #218838, #1e7e34); transform: translateY(-2px); box-shadow: 0 4px 8px rgba(33, 136, 56, 0.5); }
        .proceed-button a { color: white; text-decoration: none; }

        /* Background Panels - Original */
        .background-panel { position: absolute; width: 60%; height: 60%; overflow: hidden; transform-origin: center center; opacity: 0.65; border: none; box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2); display: block; z-index: 1; border-radius: 10px; transition: transform 0.4s ease-out, box-shadow 0.4s ease-out, opacity 0.4s ease; animation: panelBreathe 8s ease-in-out infinite alternate; }
        #panel1 { --initial-rotate: -6deg; animation-delay: 0s; top: -8%; left: -12%; width: 65%; height: 55%; transform: rotate(var(--initial-rotate)); }
        #panel2 { --initial-rotate: 5deg; animation-delay: -2s; top: -4%; right: -15%; width: 55%; height: 48%; transform: rotate(var(--initial-rotate)); }
        #panel3 { --initial-rotate: 4deg; animation-delay: -4s; bottom: -12%; left: -10%; width: 50%; height: 50%; transform: rotate(var(--initial-rotate)); }
        #panel4 { --initial-rotate: -4deg; animation-delay: -6s; bottom: -8%; right: -18%; width: 52%; height: 52%; transform: rotate(var(--initial-rotate)); }
        .background-panel img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.4s ease-out; }
        .background-panel:hover { opacity: 0.85; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3); transform: scale(1.03) rotate(calc(var(--initial-rotate) - 2deg)); animation-play-state: paused; }
        .background-panel:hover img { transform: scale(1.05); }


        /* Evaluation Form Container Styles - Original */
        #evaluation-form-container { width: 794px; margin: 30px auto; background-color: #ffffff; padding: 0; border: 1px solid #ccc; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.18); box-sizing: border-box; display: none; /* Starts hidden */ outline: none; border-radius: 8px; position: relative; z-index: 10; border-top: 4px solid #004085; }
        #form-container { padding: 5px 10px 10px 10px; }
        .ac-header-container { display: flex; justify-content: space-between; align-items: center; border: none; border-bottom: 5px solid #343a40; padding: 8px 15px; background-color: #004085; color: white; font-weight: bold; text-align: center; border-radius: 0; }
        #form-header-title { font-size: 17px; flex-grow: 1; text-align: center; color: white; letter-spacing: 0.5px;}

        /* --- Review Date Area (MODIFIED for Flatpickr & Styling) --- */
        .ac-review-date-area { display: flex; flex-direction: column; align-items: center; font-size: 12px; padding: 5px 10px; border: none; border-radius: 5px; background-color: rgba(255,255,255,0.1); margin-left: 10px; min-width: 190px; text-align: center; }
        #form-type-indicator { font-size: 11px; font-weight: bold; color: #ffc107; margin-bottom: 4px; display: block; text-align: center; /* Ensure centered */ }
        /* Requirement III: Bold and Center Review Date Label */
        .ac-review-date-label.required-field {
            display: block; /* Changed from flex */
            width: 100%; /* Take full width */
            margin-bottom: 5px;
            font-weight: bold; /* Requirement III */
            text-align: center; /* Requirement III */
        }
         .ac-review-date-area input[type="date"] { margin-top: 2px; }
         .ac-review-date-area input.highlighted { border-color: #dc3545 !important; box-shadow: 0 0 0 0.25rem rgba(220, 53, 69, 0.35) !important; }
        /* --- End Review Date Area Styles Modification --- */

        .ac-section-header { font-size: 13px; font-weight: 600; padding: 6px 10px; margin-top: 1px; margin-bottom: 3px; background-color: #6c757d; color: white; border: 1px solid #5a6268; text-align: center; border-radius: 3px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .ac-table { width: 100%; border-collapse: collapse; margin-bottom: 8px; }
        .ac-table, .ac-table th, .ac-table td { border: 1px solid #adb5bd; padding: 5px; font-size: 11px; color: #333; }
        .ac-table th { background-color: #f8f9fa; color: #004085; font-weight: 600; text-align: left; padding: 6px; }
        .ac-table td { vertical-align: middle; word-break: break-word; position: relative; background-color: #fff; }
        .ac-table:first-of-type { table-layout: fixed; width: 100%; border: 1px solid #888; }
        .ac-table:first-of-type td { padding: 6px;}
        .ac-table:first-of-type td:nth-child(1), .ac-table:first-of-type td:nth-child(3) { width: 13%; font-weight: 600; color: #004085; padding-right: 8px; vertical-align: middle; font-size: 11px; background-color: #f8f9fa;}
        .ac-table:first-of-type td:nth-child(2), .ac-table:first-of-type td:nth-child(4) { width: 32%; vertical-align: middle; }
        .ac-table:first-of-type td input[type="text"],
        .ac-table:first-of-type td input[type="email"] { width: 100%; box-sizing: border-box; margin-bottom: 0; padding: 7px; font-size: 11px; border: 1px solid #ced4da; border-radius: 3px;}
        .ac-table select, .ac-table textarea { width: 100%; padding: 7px; border: 1px solid #ced4da; border-radius: 4px; box-sizing: border-box; margin-bottom: 0; font-size: 11px;}
        .ac-table:first-of-type td input[readonly] { background-color: #f8f9fa; cursor: default; border: 1px solid #dee2e6; color: #555;}

        /* --- Loading Spinner --- */
        .spinner { display: none; width: 14px; height: 14px; border: 2px solid rgba(0, 0, 0, 0.1); border-left-color: #6c757d; border-radius: 50%; animation: spin 0.8s linear infinite; vertical-align: middle; margin-left: 5px; }
        .button .spinner { border-left-color: #ffffff; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 18px; height: 18px; border-width: 2.5px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .ac-table td { position: relative; }
        .name-cell-container { display: flex; align-items: center; gap: 5px; }
        .name-cell-container input { flex-grow: 1; }

        /* Accordion Styles - Original */
        .performance-feedback { border-bottom: 1px dashed #ccc; padding-bottom: 10px; margin-bottom: 10px; overflow: hidden; }
        .performance-feedback:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 5px; }
        .ac-metric-title.metric-toggle { background-color: #ff9800; color: white; padding: 6px 10px; font-weight: 600; margin-top: 5px; border-radius: 3px; border: 1px solid #e68a00; font-size: 12px; text-align: left; margin-bottom: 0; cursor: pointer; display: flex; justify-content: space-between; align-items: center; transition: background-color 0.2s ease, box-shadow 0.2s ease; }
        .ac-metric-title.metric-toggle:hover { background-color: #f57c00; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .metric-indicator { font-size: 14px; margin-left: 10px; transition: transform 0.3s ease; }
        .performance-feedback.expanded .metric-indicator { transform: rotate(180deg); }
        .metric-content { max-height: 0; overflow: hidden; transition: max-height 0.4s ease-out, padding 0.4s ease-out; padding: 0 10px; background-color: #fdfdfe; border: 1px solid #eee; border-top: none; border-radius: 0 0 4px 4px; margin-top: 0; }
        .performance-feedback.expanded .metric-content { max-height: 1000px; padding: 10px 10px 15px 10px; transition: max-height 0.5s ease-in, padding 0.5s ease-in; }
        .metric-details-container { padding: 5px 0; font-size: 10px; margin-bottom: 10px; border-bottom: 1px dotted #ccc; }
        .metric-rating-box { border: 1px solid #d1c4e9; padding: 8px; margin: 0 0 12px 0; width: 100%; border-radius: 5px; box-sizing: border-box; background-color: #f8f9fa; }

        /* Highlight Styles - Original */
        input.highlighted, select.highlighted, textarea.highlighted, .metric-rating-box.highlighted, .ac-comments-container textarea.highlighted { border-color: #dc3545 !important; box-shadow: 0 0 0 0.25rem rgba(220, 53, 69, 0.35) !important; }
        .ac-metric-title.metric-toggle.highlighted { border-color: #dc3545 !important; box-shadow: 0 0 0 0.25rem rgba(220, 53, 69, 0.35) !important; background-color: #d9534f; }

        /* Validation Styles - Original */
        input:required:invalid, textarea:required:invalid, select:required:invalid, input[type="date"]:required:invalid { box-shadow: none; }
        input:required:not([type="date"]), textarea:required, select:required { border: 1px solid #ced4da; }
        input[type="date"]:required { border: none; }
        input#email { border: 1px solid #ced4da; }
        input#email:focus { border-color: #86b7fe; outline: 0; box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25) !important; }

        .ac-bold-text { font-weight: 600; font-size: 11px; color: #004085; }
        .ac-download-button { background-image: linear-gradient(to right, #5cb85c, #4cae4c); border: none; color: white; padding: 12px 24px; text-align: center; text-decoration: none; display: inline-flex; align-items: center; justify-content: center; gap: 8px; font-size: 15px; font-weight: 500; margin: 20px auto 10px auto; cursor: pointer; border-radius: 5px; display: block; transition: all 0.3s ease; box-shadow: 0 2px 5px rgba(76, 174, 76, 0.4); position: relative; }
        .ac-download-button:hover { background-image: linear-gradient(to right, #4cae4c, #449d44); transform: translateY(-2px); box-shadow: 0 4px 8px rgba(76, 174, 76, 0.5); }
        .ac-download-button.loading .button-text { visibility: hidden; }
        .ac-download-button.loading .spinner { display: inline-block; }

        .ac-comments-container { display: flex; justify-content: space-between; gap: 15px; margin-top: 10px; }
        .ac-comments-container div { width: calc(50% - 7.5px); }
        .placeholder-input::placeholder { color: #888; font-style: italic; }
        .placeholder-input { width: calc(100% - 16px); padding: 7px; margin-bottom: 7px; box-sizing: border-box; height: auto; border: 1px solid #ced4da; border-radius: 3px; font-size: 11px; }

        /* --- Signature Table Styles (Refined) --- */
        .approval-signature-table { width: 100%; table-layout: fixed; border-collapse: collapse; margin-bottom: 15px; margin-top: 5px; border: 1px solid #adb5bd; }
        .approval-signature-table th, .approval-signature-table td { border: 1px solid #dee2e6; padding: 8px; text-align: center; box-sizing: border-box; vertical-align: top; word-break: break-word; position: relative; }
        .approval-signature-table .placeholder-input { width: calc(100% - 2px); margin: 0 auto; text-align: center; padding: 9px; box-sizing: border-box; border: 1px solid #ced4da; font-size: 11px; height: auto; white-space: normal; margin-bottom: 6px; background-color: #fff; color: #333; border-radius: 4px; }
        .approval-signature-table input[readonly].placeholder-input { color: #333 !important; background-color: #f8f9fa; cursor: default; font-weight: 500; border-color: #e9ecef; }
        .approval-signature-table input.signature-date-input { color: #777; font-style: normal; background-color: #fff; border: 1px solid #ced4da; }
        .approval-signature-table input.signature-date-input::placeholder { color: #bbb !important; font-style: italic; font-weight: normal; }
        .approval-signature-table th { background-color: darkslategrey; font-weight: 600; font-size: 11px; color: whitesmoke; border-bottom: 2px solid #adb5bd; }
        .approval-signature-table td { font-size: 10px; background-color: #fff; }
        #suggestions, .suggestions { display: none !important; }

        /* Rating Option Layout - Original */
        .rating-container { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; }
        .rating-scale { display: flex; justify-content: center; align-items: center; font-size: 10px; flex-wrap: wrap; gap: 8px; padding: 5px 0; }
        .rating-option { display: flex; align-items: center; justify-content: center; cursor: pointer; box-sizing: border-box; padding: 6px 10px; border-radius: 15px; transition: all 0.2s ease; width: auto; white-space: nowrap; margin: 0; border: 1px solid #ced4da; background-color: #fff; }
        .rating-option:hover { background-color: #e9ecef; border-color: #adb5bd; transform: translateY(-1px);}
        .rating-option.selected { background-color: #ffc107; color: #343a40; font-weight: 600; border-color: #ffb300; box-shadow: 0 2px 4px rgba(0,0,0,0.15); transform: translateY(-1px); }
        .rating-number { min-width: 22px; height: 22px; border: 1px solid #adb5bd; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 7px; background-color: #fff; font-weight: 600; transition: all 0.2s ease;}
        .rating-option.selected .rating-number { background-color: #343a40; color: #ffc107; border-color: #343a40; }
        .rating-option span.rating-text { font-size: 10px; color: #495057;}
        .rating-option.selected span.rating-text { color: #343a40; }
        input[type="radio"] { display: none; }

        /* Required Field Indicator Styling - Original */
        .required-field::after { content: " *"; color: #dc3545; font-weight: bold; margin-left: 2px;}
        .ac-bold-text.required-field::after, .ac-review-date-label.required-field::after, .ac-comments-container div label.required-field::after, .ac-section-header.required-field::after { content: " *"; color: #dc3545; font-weight: bold; margin-left: 2px; }

        /* Other Styles - Original */
        .suggestion-item { padding: 5px 8px; cursor: pointer; white-space: nowrap; font-size: 11px; }
        .suggestion-item:hover { background-color: #f0f0f0; }
        .approval-signature-table td { padding: 8px; }
        .approval-signature-table .placeholder-input { width: calc(100% - 1px); margin-bottom: 6px; padding: 12px;}
        .ac-comments-container div label { font-weight: 600; color: #004085; display: block; margin-bottom: 6px; font-size: 11px;}
        .ac-comments-container textarea { width: 100%; padding: 8px; margin-bottom: 0; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; resize: vertical; font-size: 11px; min-height: 45px;}

        /* Evaluation Page Grid Styles - Adjusted for Transitions */
        #evaluation-page { padding: 40px 0; display:none; /* Starts hidden */ min-height: 100vh; }
        #evaluation-page .container { width: 90%; max-width: 1300px; margin: 30px auto; background-color: rgba(255, 255, 255, 0.80); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.25); padding: 40px; border-radius: 18px; box-shadow: 0 10px 40px rgba(31, 38, 135, 0.2); position: relative; overflow: hidden; z-index: 5; }
        #evaluation-page h1 { color: #2c3e50; text-align: center; margin-bottom: 40px; font-size: 2.8em; font-weight: 600; }
        .position-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(210px, 1fr)); gap: 25px; padding: 25px 0; }
        .position-card { display: flex; flex-direction: column; align-items: center; justify-content: center; background-color: rgba(255, 255, 255, 0.95); border-radius: 12px; padding: 25px; text-align: center; text-decoration: none; color: #343a40; transition: transform 0.25s ease-in-out, box-shadow 0.25s ease-in-out, background-color 0.25s ease; box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1); min-height: 130px; border: 1px solid rgba(0, 0, 0, 0.1); font-weight: 500; font-size: 15px; }
        .position-card:hover { transform: translateY(-5px) scale(1.03); box-shadow: 0 10px 20px rgba(0, 0, 0, 0.18); background-color: #ffffff; color: #0056b3; }
        .position-card:hover .position-icon { color: #007bff; }
        .position-icon { font-size: 30px; margin-bottom: 15px; color: #6c757d; transition: color 0.25s ease; }

        /* Back Buttons Styling (Shared) - Original */
        #evaluation-page button[onclick="showWelcomeMessageFromEval()"], #evaluation-form-container button[onclick="showEvaluationPage()"] { display: inline-flex; align-items: center; justify-content: center; gap: 8px; margin: 25px auto 15px auto; padding: 12px 25px; background-color: #6c757d; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 500; transition: all 0.3s ease; box-shadow: 0 2px 4px rgba(108, 117, 125, 0.4); }
        #evaluation-page button[onclick="showWelcomeMessageFromEval()"]:hover, #evaluation-form-container button[onclick="showEvaluationPage()"]:hover { background-color: #5a6268; transform: translateY(-2px); box-shadow: 0 4px 6px rgba(108, 117, 125, 0.5); }
        #evaluation-page button[onclick="showWelcomeMessageFromEval()"]::before, #evaluation-form-container button[onclick="showEvaluationPage()"]::before { content: "\f060"; font-family: "Font Awesome 6 Free"; font-weight: 900; }

    </style>
</head>

<!-- HTML Body Structure (Original) -->
<body class="gradient-background">

    <div id="welcome-page"> <!-- Initially Visible -->
         <div id="login-container"> <!-- Initially Visible -->
             <div class="login-logo"><img src="logo.png" alt="Al Tasnim Group Logo"></div>
             <div class="login-input-group"><label for="username">User Name</label><input type="text" id="username" name="username" required></div>
             <div class="login-input-group"><label for="password">Password</label><input type="password" id="password" name="password" required></div>
             <button type="button" class="login-button" onclick="authenticateUser()">
                 <span class="button-text"><i class="fas fa-sign-in-alt"></i> Login</span>
                 <span class="spinner"></span>
             </button>
             <div id="login-message" aria-live="polite"></div>
         </div>
         <div class="background-panel" id="panel1"><img src="Pannel1.jpg" alt="Construction Machinery"></div>
         <div class="background-panel" id="panel2"><img src="Pannel2.jpg" alt="Construction Workers"></div>
         <div class="background-panel" id="panel3"><img src="Pannel3.jpeg" alt="Worker Welding"></div>
         <div class="background-panel" id="panel4"><img src="https://images.unsplash.com/photo-1591639831738-c48204e0933c?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8MHx8fGVuffA%3D%3D" alt="Blueprints"></div>
         <div id="welcome-message-container"> <!-- Initially Hidden -->
             <h1 class="welcome-message">Welcome to Employee Performance Evaluation!</h1>
             <a href="#" class="proceed-button" onclick="showEvaluationPage()">Proceed to Evaluation <i class="fas fa-arrow-right"></i></a>
         </div>
    </div>

     <div id="evaluation-page"> <!-- Initially Hidden -->
         <div class="container">
             <h1>Employee Performance Evaluation</h1>
             <div class="position-grid">
                 <a href="#" onclick="showEvaluationFormByType('AC Technician'); return false;" class="position-card"><i class="fas fa-wrench position-icon"></i>AC Technician</a>
                 <a href="#" onclick="showEvaluationFormByType('Dispatch Officer'); return false;" class="position-card"><i class="fas fa-headset position-icon"></i>Dispatch Officer</a>
                 <a href="#" onclick="showEvaluationFormByType('Electrical Engineer'); return false;" class="position-card"><i class="fas fa-bolt position-icon"></i>Electrical Engineer</a>
                 <a href="#" onclick="showEvaluationFormByType('Electrician Industrial'); return false;" class="position-card"><i class="fas fa-industry position-icon"></i>Electrician Industrial</a>
                 <a href="#" onclick="showEvaluationFormByType('HSE Advisor'); return false;" class="position-card"><i class="fas fa-shield-alt position-icon"></i>HSE Advisor</a>
                 <a href="#" onclick="showEvaluationFormByType('IT Support Executive'); return false;" class="position-card"><i class="fas fa-desktop position-icon"></i>IT Support Executive</a>
                 <a href="#" onclick="showEvaluationFormByType('Permit Applicant'); return false;" class="position-card"><i class="fas fa-file-alt position-icon"></i>Permit Applicant</a>
                 <a href="#" onclick="showEvaluationFormByType('Permit Holder'); return false;" class="position-card"><i class="fas fa-check-circle position-icon"></i>Permit Holder</a>
                 <a href="#" onclick="showEvaluationFormByType('Pipe Fitter'); return false;" class="position-card"><i class="fas fa-tools position-icon"></i>Pipe Fitter</a>
                 <a href="#" onclick="showEvaluationFormByType('Quality Control'); return false;" class="position-card"><i class="fas fa-check position-icon"></i>Quality Control</a>
                 <a href="#" onclick="showEvaluationFormByType('Quantity Surveyor'); return false;" class="position-card"><i class="fas fa-calculator position-icon"></i>Quantity Surveyor</a>
                 <a href="#" onclick="showEvaluationFormByType('Site Engineer - Electrical'); return false;" class="position-card"><i class="fas fa-plug position-icon"></i>Site Engineer - Electrical</a>
                 <a href="#" onclick="showEvaluationFormByType('Site Engineer'); return false;" class="position-card"><i class="fas fa-hard-hat position-icon"></i>Site Engineer</a>
                 <a href="#" onclick="showEvaluationFormByType('Stores Engineer - General'); return false;" class="position-card"><i class="fas fa-warehouse position-icon"></i>Stores Engineer - General</a>
                 <a href="#" onclick="showEvaluationFormByType('Supervisor - Security'); return false;" class="position-card"><i class="fas fa-user-shield position-icon"></i>Supervisor - Security</a>
                 <!-- Requirement I: Add Behaviour Form Link -->
                 <a href="#" onclick="showEvaluationFormByType('Behaviour'); return false;" class="position-card"><i class="fas fa-users position-icon"></i>Behaviour</a>
             </div>
              <button onclick="showWelcomeMessageFromEval()">Back to Welcome</button>
         </div>
     </div>

    <div id="evaluation-form-container"> <!-- Initially Hidden -->
        <div id="form-container">
            <div class="ac-header-container">
                <h2 id="form-header-title">EMPLOYEE PERFORMANCE EVALUATION FORM</h2>
                <div class="ac-review-date-area">
                    <!-- Requirement IV: Form Type Indicator Position -->
                    <span id="form-type-indicator">SELECT FORM TYPE</span>
                    <label for="review-date-header" class="ac-review-date-label required-field">Review Date:</label>
                    <input type="date" id="review-date-header" class="required" placeholder="Select Date..." aria-label="Review Date" />
                </div>
            </div>

            <div class="ac-section-header" id="personal-details">EMPLOYEE DETAILS</div>
            <table class="ac-table">
                <tr>
                    <td class="ac-bold-text required-field">Employee No</td><td><input type="text" id="emp-number" class="required" maxlength="6" oninput="this.value = this.value.replace(/[^0-9]/g, '');"/></td>
                    <td class="ac-bold-text required-field">Employee Name</td>
                    <td><div class="name-cell-container"><input type="text" id="emp-name" class="required" readonly /><span class="spinner" id="emp-spinner"></span></div></td>
                </tr>
                <tr>
                    <td class="ac-bold-text">Position</td><td><input type="text" id="position-text" readonly /></td>
                    <td class="ac-bold-text">Employee Group</td><td><input type="text" id="emp-group" readonly /></td>
                </tr>
                <tr>
                    <td class="ac-bold-text">Division</td><td><input type="text" id="division-text" readonly /></td>
                    <td class="ac-bold-text">Department</td><td><input type="text" id="department-text" readonly /></td>
                </tr>
                <tr>
                    <td class="ac-bold-text">Email ID</td><td><input type="email" id="email" maxlength="40" /></td>
                    <td class="ac-bold-text required-field">Contact No</td><td><input type="text" id="contact" class="required" maxlength="8" oninput="this.value = this.value.replace(/[^0-9NA]/g, '').toUpperCase();" /></td>
                </tr>
                <tr>
                    <td class="ac-bold-text required-field">Reviewer ID</td>
                    <td><input type="text" id="reviewer-number" class="required" maxlength="6" oninput="this.value = this.value.replace(/[^0-9]/g, '');"/></td>
                    <td class="ac-bold-text required-field">Reviewer Name</td>
                    <td><div class="name-cell-container"><input type="text" id="reviewer-name" class="required" readonly /><span class="spinner" id="reviewer-spinner"></span></div></td>
                </tr>
            </table>

            <div class="ac-section-header" id="performance-metrics-header">PERFORMANCE METRICS (Click to Expand/Collapse)</div>
            <div id="performance-metrics"><!-- Metrics generated by JS --></div>

            <div class="ac-section-header" id="overall-performance-header">OVERALL PERFORMANCE</div>
            <p id="overall-performance" style="text-align: center; font-weight: 500; margin: 12px 0 15px 0; font-size: 12px;">Please rate all metrics.</p>

            <div class="ac-section-header required-field">OVERALL REMARKS</div>
            <textarea rows="4" id="remarks" class="required" style="width: calc(100% - 20px); margin: 10px auto; display: block; box-sizing: border-box;"></textarea>

            <div class="ac-section-header">APPROVAL SIGNATURES</div>
            <table class="approval-signature-table">
                <thead><tr><th>EMPLOYEE</th><th>FIRST WITNESS</th><th>SECOND WITNESS</th></tr></thead>
                <tbody><tr>
                    <td>
                        <input type="text" id="employee-number-signature" placeholder="EMPLOYEE NUMBER" class="placeholder-input" readonly />
                        <input type="text" id="employee-name-signature" placeholder="EMPLOYEE NAME" class="placeholder-input" readonly />
                        <input type="text" id="position-signature" placeholder="POSITION / DESIGNATION" class="placeholder-input" readonly />
                        <input type="text" placeholder="SIGNATURE / DATE" class="placeholder-input signature-date-input" />
                    </td>
                    <td>
                        <input type="text" id="employee-number-2" placeholder="EMPLOYEE NUMBER" class="placeholder-input" maxlength="6" oninput="this.value = this.value.replace(/[^0-9]/g, '');"/>
                        <div class="name-cell-container"><input type="text" id="employee-name-2" placeholder="EMPLOYEE NAME" class="placeholder-input" readonly /><span class="spinner" id="witness1-spinner"></span></div>
                        <input type="text" id="position-2" placeholder="POSITION / DESIGNATION" class="placeholder-input" readonly />
                        <input type="text" placeholder="SIGNATURE / DATE" class="placeholder-input signature-date-input" />
                    </td>
                    <td>
                        <input type="text" id="employee-number-3" placeholder="EMPLOYEE NUMBER" class="placeholder-input" maxlength="6" oninput="this.value = this.value.replace(/[^0-9]/g, '');"/>
                         <div class="name-cell-container"><input type="text" id="employee-name-3" placeholder="EMPLOYEE NAME" class="placeholder-input" readonly /><span class="spinner" id="witness2-spinner"></span></div>
                        <input type="text" id="position-3" placeholder="POSITION / DESIGNATION" class="placeholder-input" readonly />
                        <input type="text" placeholder="SIGNATURE / DATE" class="placeholder-input signature-date-input" />
                    </td>
                </tr></tbody>
            </table>
            <table class="approval-signature-table">
                <thead><tr><th>REVIEWER</th><th>HOD</th></tr></thead>
                <tbody><tr>
                    <td>
                        <input type="text" id="reviewer-number-signature" placeholder="EMPLOYEE NUMBER" class="placeholder-input" readonly />
                        <input type="text" id="reviewer-name-signature" placeholder="EMPLOYEE NAME" class="placeholder-input" readonly />
                        <input type="text" id="reviewer-position-signature" placeholder="POSITION / DESIGNATION" class="placeholder-input" readonly />
                        <input type="text" placeholder="SIGNATURE / DATE" class="placeholder-input signature-date-input" />
                    </td>
                    <td>
                        <input type="text" id="hod-number" placeholder="EMPLOYEE NUMBER" class="placeholder-input" maxlength="6" oninput="this.value = this.value.replace(/[^0-9]/g, '');"/>
                         <div class="name-cell-container"><input type="text" id="hod-name" placeholder="EMPLOYEE NAME" class="placeholder-input" readonly /><span class="spinner" id="hod-spinner"></span></div>
                        <input type="text" id="hod-position" placeholder="POSITION / DESIGNATION" class="placeholder-input" readonly />
                        <input type="text" placeholder="SIGNATURE / DATE" class="placeholder-input signature-date-input" />
                    </td>
                </tr></tbody>
            </table>

            <button class="ac-download-button" onclick="downloadAndSave()">
                 <span class="button-text"><i class="fas fa-file-pdf"></i> Download PDF & Save Data</span>
                 <span class="spinner"></span>
            </button>
             <button onclick="showEvaluationPage()">Back to Evaluation List</button>
        </div>
    </div>

    <!-- Flatpickr JS -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <!-- html2pdf JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>

    <!-- Your Application Logic -->
    <script>
        // --- START JAVASCRIPT --- //

        // --- Constants ---
        const LOOKUP_DELAY = 500; // ms
        const MAX_METRICS = 15;
        const TRANSITION_DURATION = 500; // ms (match CSS transition duration)
        // URLs (Keep your actual URLs)
        const GOOGLE_SHEETS_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQdxa99pRN_wDel4uOm07GpSSi8YcHP4Q9z-7h7hD70gIeqyhY6QcWoxDjHKn8EGiUdnkNLDOdOY2Fu/pub?output=csv";
        const USERS_GOOGLE_SHEETS_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQbER5yTvms6Xt2DMLUeE3nTS2jhiO6c81vd3uSlKGqzM7qFHgxgNhP0Hho4AXo1dL0D53RqjYO3nK8/pub?output=csv";
        const APPS_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwMZ19MP6-vD1bZ-B-JMyFc1_dpiWlQ8gBdHsZYbhvGClQiBrXCDnj_3Mmp_CsmsARu/exec";
        const RATING_DESCRIPTIONS = { 1: "Poor", 2: "Average", 3: "Good", 4: "Very Good", 5: "Excellent" };

        // --- Global Variables ---
        let currentFormType = null;
        let empLookupTimeout = null;
        let reviewerLookupTimeout = null;
        let witness2LookupTimeout = null;
        let witness3LookupTimeout = null;
        let hodLookupTimeout = null;
        let employeeData = [];
        let userData = [];
        let flatpickrInstance = null;
        let loggedInUsername = null; // Requirement V: Store logged in user

        // --- DOM Element References ---
        let employeeNumberInput, employeeNameInput, positionTextInput, employeeGroupInput, divisionTextInput, departmentTextInput, emailInput, contactInput;
        let reviewerNumberInput, reviewerNameInput;
        let witness2NumberInput, witness2NameInput, witness2PosInput;
        let witness3NumberInput, witness3NameInput, witness3PosInput;
        let hodNumberInput, hodNameInput, hodPosInput;
        let metricsContainer, overallPerformanceText;
        let loginMessageElement, loginContainerElement, welcomeMessageContainerElement, passwordInputElement, usernameInputElement;
        let evaluationPageElement, evaluationFormContainerElement, welcomePageElement;
        let reviewDateInput;
        let formTypeIndicatorSpan;
        // Spinner references
        let empSpinner, reviewerSpinner, witness1Spinner, witness2Spinner, hodSpinner;


         // --- METRICS DATA STRUCTURE (Added 'Behaviour') ---
         const allMetricsData = {
              "AC Technician": [ /* ... keep existing ... */ { title: "1. TECHNICAL KNOWLEDGE", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>HVAC Systems Understanding:</b> Knowledge of various AC systems, including residential, commercial, and industrial units.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Diagnostics and Troubleshooting:</b> Ability to diagnose issues accurately using appropriate tools and techniques.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Electrical Knowledge:</b> Understanding of electrical components and wiring in HVAC systems, including capacitors, relays, and circuit boards.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Refrigeration Knowledge:</b> Familiarity with refrigeration cycles, refrigerants, and their proper handling and charging procedures.</div>` }, { title: "2. HANDS-ON SKILLS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Installation Skills:</b> Competence in installing AC units, including proper setup, connections, and system configuration.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Repair Skills:</b> Proficiency in repairing faulty components, including compressors, fans, coils, thermostats, and wiring.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Maintenance Skills:</b> Ability to perform routine maintenance tasks such as cleaning filters, coils, and condensers, checking refrigerant levels, and ensuring system efficiency.</div>` }, { title: "3. PROBLEM-SOLVING ABILITY", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Diagnosing Complex Issues:</b> Ability to identify and troubleshoot complex mechanical or electrical problems.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Efficient Solutions:</b> Ability to devise practical, cost-effective solutions to fix problems or improve system performance.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Adaptability:</b> Adjusting solutions based on the specific needs of the environment (e.g., residential vs. commercial setups).</div>` }, { title: "4. ATTENTION TO DETAIL", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Precision:</b> Ensuring all installations, repairs, and maintenance are completed accurately and to manufacturer specifications.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Safety Compliance:</b> Adhering to safety guidelines and protocols, such as handling refrigerants safely, working with electricity, and ensuring proper ventilation.</div>` }, { title: "5. CUSTOMER SERVICE SKILLS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Communication:</b> Explaining technical issues and solutions to customers in an understandable and professional manner.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Professionalism:</b> Maintaining a courteous, friendly, and respectful demeanor when interacting with customers, whether on site or over the phone.</div><div style="border: 1px solid #ddd; padding: 2px; margin:0; margin-bottom: 3px;"><b>Customer Education:</b> Offering advice on system maintenance, energy-saving tips, and how to operate AC units properly.</div>` }, { title: "6. TIME MANAGEMENT", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Efficiency:</b> Completing tasks within the expected time frame, ensuring minimal disruption to the customer’s daily activities.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Prioritization:</b> Managing multiple service calls, balancing urgent repairs with routine maintenance without compromising quality.</div>` }, { title: "7. KNOWLEDGE OF CODES AND REGULATIONS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Local Codes and Standards:</b> Knowledge of local, state, and federal regulations regarding HVAC systems, such as installation codes, refrigerant handling, and energy efficiency standards.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Permit Requirements:</b> Understanding when and how to obtain necessary permits for installation or repairs.</div>` }, { title: "8. PHYSICAL AND MANUAL DEXTERITY", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Physical Stamina:</b> Ability to work in challenging physical environments (e.g., rooftops, basements, attics) and handle heavy equipment.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Precision Handling:</b> Skill in using tools such as wrenches, pressure gauges, thermometers, and soldering tools.</div>` }, { title: "9. SAFETY AWARENESS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Workplace Safety:</b> Consistently following safety protocols, such as wearing personal protective equipment (PPE), handling hazardous materials properly, and ensuring workspaces are safe.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Hazard Prevention:</b> Recognizing and mitigating potential safety hazards, such as electrical risks, refrigerant leaks, or improper ventilation.</div>` }, { title: "10. TROUBLESHOOTING EFFICIENCY", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Speed:</b> The ability to identify problems and fix them quickly, minimizing downtime for the customer.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Comprehensive Troubleshooting:</b> Not only fixing the immediate issue but also identifying any other potential problems or areas for improvement.</div>` }, { title: "11. QUALITY OF WORK", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Durability of Work:</b> Ensuring repairs and installations are durable, minimizing the need for repeat visits or fixes.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Attention to Detail:</b> Thoroughness in performing repairs and maintenance, ensuring all components are functioning properly.</div>` }, { title: "12. ADAPTABILITY AND CONTINUED LEARNING", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Staying Current:</b> Keeping up to date with the latest AC technologies, refrigerants, and industry trends.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Certifications:</b> Having relevant certifications such as EPA 608 (for refrigerant handling), NATE (North American Technician Excellence), or HVACR certifications that demonstrate competence and knowledge.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Training and Development:</b> Willingness to participate in ongoing training or workshops to enhance skills and knowledge.</div>` }, { title: "13. PERFORMANCE METRICS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Customer Satisfaction:</b> Positive feedback from clients regarding service quality, communication, and reliability.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>First-Time Fix Rate:</b> The percentage of issues resolved on the first visit.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Work Completion Rate:</b> Successful completion of jobs without the need for rework.</div>` } ],
              "Dispatch Officer": [ /* ... keep existing ... */ { title: "1. COMMUNICATION SKILLS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Clarity and Efficiency:</b> Ability to provide clear, concise, and accurate information to drivers, clients, or team members.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Listening Skills:</b> Actively listens to instructions, requests, and information to ensure accurate understanding and response.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Multitasking in Communication:</b> Managing multiple communication channels (radio, phone, email) without errors.</div>`}, { title: "2. ORGANIZATIONAL SKILLS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Time Management:</b> Effectively prioritizing tasks to ensure timely deliveries or dispatches.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Documentation:</b> Accurately recording and maintaining logs, reports, and other relevant paperwork.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Scheduling:</b> Ability to create and adjust schedules efficiently to maximize resources and meet operational demands.</div>`}, { title: "3. PROBLEM-SOLVING ABILITY", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Quick Thinking:</b> Ability to handle unforeseen challenges (e.g., delays, accidents) with a calm and logical approach.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Decision Making:</b> Making informed and practical decisions quickly, especially under pressure.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Adaptability:</b> Adjusting to changes or emergencies without compromising service or safety.</div>`}, { title: "4. ATTENTION TO DETAIL", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Accuracy:</b> Ensuring dispatches are carried out correctly, including addresses, times, routes, and special instructions.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Monitoring:</b> Keeping track of drivers, deliveries, and schedules, ensuring that everything is progressing as planned.</div>`}, { title: "5. TECHNOLOGICAL PROFICIENCY", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Software Use:</b> Familiarity with dispatching software and tools used for tracking shipments, vehicles, or deliveries.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>GPS and Routing Systems:</b> Ability to use navigation systems or route optimization tools to guide drivers effectively.</div>`}, { title: "6. KNOWLEDGE OF SAFETY REGULATIONS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Compliance:</b> Ensuring that dispatches are made in accordance with safety and regulatory guidelines, especially regarding transport laws, driver hours, and vehicle maintenance.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Risk Management:</b> Identifying potential safety hazards and taking preventive measures.</div>`}, { title: "7. CUSTOMER SERVICE SKILLS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Client Interaction:</b> Professionalism in dealing with customers, addressing complaints, and providing updates.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Problem Resolution:</b> Handling customer service issues that may arise during dispatch, such as delays or route changes.</div>`}, { title: "8. TEAM COLLABORATION", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Cooperation:</b> Working effectively with other team members, drivers, and departments.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Leadership:</b> Guiding the dispatch team or taking charge when necessary, especially during busy times or emergencies.</div>`}, { title: "9. STRESS MANAGEMENT", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Composure Under Pressure:</b> Ability to stay calm and focused when handling multiple tasks or responding to emergencies.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Conflict Resolution:</b> Managing conflicts within the team or with customers effectively.</div>`}, { title: "10. PERFORMANCE METRICS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Timeliness:</b> Meeting deadlines for dispatch and deliveries consistently.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Accuracy:</b> Minimizing errors in dispatch and delivery details, including addresses, times, and special requirements.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Customer Satisfaction:</b> Maintaining a high level of customer satisfaction, measured through feedback and service consistency.</div>`} ],
             "Electrical Engineer": [ /* ... keep existing ... */ { title: "1. TECHNICAL COMPETENCE", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Knowledge of Electrical Engineering Principles:</b> Proficiency in core concepts such as circuit theory, power systems, electromagnetism, and control systems.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Application of Theory to Practice:</b> Ability to apply theoretical knowledge to solve practical engineering problems.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Use of Engineering Software:</b> Competency in using simulation, design, and analysis software (e.g., AutoCAD, MATLAB, ETAP).</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Design Skills:</b> Ability to design electrical systems according to specifications.</div>`}, { title: "2. PROBLEM-SOLVING ABILITIES", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Innovative Solutions:</b> Ability to propose innovative, cost-effective solutions.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Troubleshooting and Diagnostics:</b> Skill in diagnosing and troubleshooting electrical systems.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Root Cause Analysis:</b> Capacity to identify the root cause of electrical failures.</div>`}, { title: "3. PROJECT MANAGEMENT", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Project Planning and Execution:</b> Ability to plan, schedule, and manage projects.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Resource Management:</b> Efficient management of resources.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Quality Control:</b> Ensuring work meets required quality standards and regulatory compliance.</div>`}, { title: "4. SAFETY AND COMPLIANCE", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Adherence to Safety Standards:</b> Knowledge and adherence to electrical safety standards (e.g., NEC, IEC).</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Regulatory Compliance:</b> Understanding and compliance with local and national regulations.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Risk Assessment and Mitigation:</b> Ability to identify electrical hazards and implement mitigation measures.</div>`}, { title: "5. COMMUNICATION SKILLS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Documentation:</b> Ability to prepare clear and accurate technical documentation.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Team Collaboration:</b> Ability to work effectively in multidisciplinary teams.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Client Interaction:</b> Proficiency in presenting technical solutions to clients.</div>`}, { title: "6. LEADERSHIP AND TEAMWORK", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Leadership Skills:</b> Ability to lead and mentor junior engineers (if applicable).</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Collaboration:</b> Effective collaboration with other departments.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Conflict Resolution:</b> Ability to handle conflicts professionally.</div>`}, { title: "7. ADAPTABILITY AND LEARNING", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Continuous Learning:</b> Willingness to stay updated with latest trends and technologies.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Flexibility in Problem-Solving:</b> Ability to adapt to changing requirements.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Professional Development:</b> Participation in training and workshops.</div>`}, { title: "8. EFFICIENCY AND PRODUCTIVITY", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Time Management:</b> Ability to prioritize tasks and meet deadlines.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Cost Efficiency:</b> Ability to balance cost constraints with technical requirements.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Output and Results:</b> Ability to complete tasks and projects efficiently.</div>`}, { title: "9. INNOVATION AND INITIATIVE", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Creative Problem-Solving:</b> Ability to think outside the box.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Initiative:</b> Proactiveness in identifying potential issues and suggesting improvements.</div>`}, { title: "10. CUSTOMER OR STAKEHOLDER SATISFACTION", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Client Satisfaction:</b> Ability to meet client expectations.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Internal Stakeholder Satisfaction:</b> Ensuring electrical solutions meet internal requirements.</div>`}, { title: "11. ETHICS AND PROFESSIONALISM", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Integrity:</b> Demonstrating honesty, transparency, and accountability.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Professionalism:</b> Adhering to engineering ethics and maintaining confidentiality.</div>`}, { title: "12. PERFORMANCE METRICS AND KEY PERFORMANCE INDICATORS (KPIS)", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Project Completion:</b> On-time and within-budget delivery.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Error Rate:</b> Frequency of errors or rework.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Customer Feedback:</b> Evaluating feedback from clients/stakeholders.</div>`} ],
             "Electrician Industrial": [ /* ... keep existing ... */ { title: "1. TECHNICAL KNOWLEDGE", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Electrical Systems Understanding:</b> Proficiency in industrial electrical systems and equipment.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Wiring and Circuitry:</b> Ability to install, repair, and maintain wiring/circuits.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Blueprint Reading:</b> Ability to read technical drawings and wiring diagrams.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Power Distribution:</b> Knowledge of power distribution systems.</div>`}, { title: "2. INSTALLATION AND MAINTENANCE SKILLS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Electrical Installations:</b> Skill in installing systems and equipment.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Preventive Maintenance:</b> Ability to carry out routine maintenance and inspections.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Troubleshooting and Repairs:</b> Skill in diagnosing and repairing electrical issues quickly.</div>`}, { title: "3. SAFETY AND COMPLIANCE", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Safety Protocols:</b> Adherence to safety regulations (LOTO, PPE).</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Compliance with Standards:</b> Knowledge of electrical codes (NEC, IEC).</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Hazardous Environment Awareness:</b> Ability to identify and mitigate risks.</div>`}, { title: "4. TROUBLESHOOTING AND DIAGNOSTICS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Systematic Approach:</b> Ability to use logical methods for troubleshooting.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Diagnostic Tools:</b> Proficiency with multimeters, thermal cameras, etc.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Root Cause Analysis:</b> Skill in identifying the root cause of failures.</div>`}, { title: "5. ELECTRICAL EQUIPMENT AND CONTROLS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Motor Control Systems:</b> Expertise with MCCs, PLCs, VFDs.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Control Systems:</b> Familiarity with manual/automated control systems.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Calibration and Testing:</b> Ability to calibrate and test systems.</div>`}, { title: "6. PROBLEM-SOLVING AND EFFICIENCY", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Quick Decision-Making:</b> Ability to make decisions under pressure.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Work Efficiency:</b> Completing tasks timely and efficiently.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Resource Management:</b> Effective use of materials and tools.</div>`}, { title: "7. TIME MANAGEMENT AND TASK PRIORITIZATION", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Task Prioritization:</b> Ability to prioritize critical repairs.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Meeting Deadlines:</b> Completing work within designated time frames.</div>`}, { title: "8. COMMUNICATION SKILLS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Reporting:</b> Ability to document work clearly.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Team Collaboration:</b> Working effectively with others.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Clear Communication:</b> Ability to explain technical issues clearly.</div>`}, { title: "9. EXPERIENCE AND KNOWLEDGE OF PLANT-SPECIFIC SYSTEMS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Plant-Specific Equipment:</b> Familiarity with plant equipment.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Industrial Electrical Maintenance:</b> Experience with plant-specific procedures.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Energy Efficiency:</b> Knowledge of energy-saving technologies.</div>`}, { title: "10. ADAPTABILITY AND CONTINUOUS LEARNING", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Adaptability to Change:</b> Ability to adapt to new technology/protocols.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Ongoing Education:</b> Willingness to stay current.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Learning from Experience:</b> Applying lessons learned.</div>`}, { title: "11. LEADERSHIP AND SUPERVISION (IF APPLICABLE)", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Team Leadership:</b> Ability to manage/mentor junior staff.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Delegation:</b> Effectively delegating tasks.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Training:</b> Providing training and support.</div>`}, { title: "12. PERFORMANCE METRICS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Downtime Reduction:</b> Effectiveness in minimizing equipment downtime.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Work Quality:</b> High standards of electrical work.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Customer (Internal) Satisfaction:</b> Delivering quality electrical support.</div>`}, { title: "13. ENERGY EFFICIENCY AND COST MANAGEMENT", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Energy Management:</b> Identifying areas for energy efficiency.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Cost-Effectiveness:</b> Ensuring work is carried out cost-effectively.</div>`} ],
             "HSE Advisor": [ /* ... keep existing ... */ { title: "1. KNOWLEDGE OF HSE REGULATIONS AND STANDARDS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Legal Compliance:</b> Understanding and application of HSE regulations (OSHA, EPA).</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Industry Standards:</b> Knowledge of ISO 45001, ISO 14001.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Environmental Regulations:</b> Awareness of waste management, emissions control.</div>`}, { title: "2. RISK ASSESSMENT AND HAZARD IDENTIFICATION", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Risk Analysis:</b> Ability to conduct thorough risk assessments.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Mitigation Measures:</b> Expertise in recommending control measures (PPE, procedures).</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Job Safety Analysis (JSA):</b> Ability to conduct and guide JSA.</div>`}, { title: "3. SAFETY TRAINING AND AWARENESS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Training Program Development:</b> Ability to develop and deliver safety training.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Ongoing Education:</b> Organizing drills, campaigns, refreshers.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Tailored Training:</b> Customizing training for specific needs.</div>`}, { title: "4. SAFETY AUDITS AND INSPECTIONS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Site Inspections:</b> Regularly conducting audits/inspections.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Audit Readiness:</b> Maintaining records for external/internal audits.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Non-Compliance Tracking:</b> Monitoring and addressing non-compliance.</div>`}, { title: "5. INCIDENT INVESTIGATION AND REPORTING", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Accident Investigation:</b> Leading/supporting investigations for root causes.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Incident Reporting:</b> Ensuring timely and accurate reporting.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Data Analysis:</b> Analyzing incident data for trends and prevention.</div>`}, { title: "6. EMERGENCY RESPONSE PLANNING", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Emergency Procedures:</b> Developing and maintaining response plans.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Crisis Management:</b> Leading/supporting emergency response.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Drills and Simulations:</b> Organizing regular drills.</div>`}, { title: "7. ENVIRONMENTAL PROTECTION AND SUSTAINABILITY", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Sustainability Initiatives:</b> Promoting responsible practices (waste, resources).</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Environmental Risk Management:</b> Identifying/mitigating environmental risks.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Green Certifications:</b> Promoting/working towards certifications (ISO 14001).</div>`}, { title: "8. COMMUNICATION AND COLLABORATION", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Clear Communication:</b> Communicating HSE policies clearly.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Stakeholder Engagement:</b> Collaborating with teams, regulators, clients.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Reporting and Documentation:</b> Producing clear, detailed reports.</div>`}, { title: "9. LEADERSHIP AND INFLUENCE", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Promoting a Safety Culture:</b> Leading by example.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Influence and Advocacy:</b> Encouraging safe practices.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Conflict Resolution:</b> Handling safety conflicts professionally.</div>`}, { title: "10. TRAINING, CERTIFICATIONS, AND PROFESSIONAL DEVELOPMENT", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Relevant Certifications:</b> Holding NEBOSH, IOSH, OSHA certs.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Continuous Learning:</b> Engaging in ongoing professional development.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Professional Affiliations:</b> Active membership in HSE organizations.</div>`}, { title: "11. TEAMWORK AND INTERPERSONAL SKILLS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Collaboration with Teams:</b> Working effectively with other departments.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Interpersonal Skills:</b> Building strong relationships.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Motivating Others:</b> Inspiring safe work practices.</div>`}, { title: "12. PERFORMANCE TRACKING AND CONTINUOUS IMPROVEMENT", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Safety Performance Metrics:</b> Monitoring KPIs (accident rates, near misses).</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Continuous Improvement:</b> Identifying and implementing improvements.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Feedback Loops:</b> Using feedback to improve systems.</div>`}, { title: "13. ETHICS AND PROFESSIONALISM", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Integrity:</b> Acting with honesty and transparency.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Commitment to Compliance:</b> Demonstrating full compliance adherence.</div>`}, { title: "14. ADAPTABILITY AND CRISIS MANAGEMENT", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Dealing with Unforeseen Issues:</b> Adapting to changing conditions.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Problem Solving in High-Pressure Situations:</b> Calmly managing emergencies.</div>`} ],
             "IT Support Executive": [ /* ... keep existing ... */ { title: "1. TECHNICAL KNOWLEDGE AND SKILLS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Hardware/Software Expertise:</b> Troubleshooting servers, network devices, endpoints.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Operating Systems:</b> Administering Windows, Linux, macOS.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Networking Knowledge:</b> Understanding IP, DNS, DHCP, VPN, firewalls.</div>`}, { title: "2. PROBLEM-SOLVING AND TROUBLESHOOTING", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Issue Resolution:</b> Diagnosing and resolving complex technical issues.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Root Cause Analysis:</b> Identifying underlying causes.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Troubleshooting Methodology:</b> Using systematic methods.</div>`}, { title: "3. SYSTEM ADMINISTRATION", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Backup and Recovery:</b> Ensuring robust backup/restore strategies.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Patch Management:</b> Regular updating and patching.</div>`}, { title: "4. SECURITY AND COMPLIANCE", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Security Practices:</b> Implementing firewalls, antivirus, encryption.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Access Control:</b> Managing user permissions.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Compliance:</b> Adherence to security standards (GDPR, HIPAA).</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Incident Response:</b> Managing security breaches.</div>`}, { title: "5. INFRASTRUCTURE MONITORING AND OPTIMIZATION", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>System Monitoring:</b> Proactively monitoring infrastructure health.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Performance Tuning:</b> Optimizing system/network performance.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Capacity Planning:</b> Assessing resource needs.</div>`}, { title: "6. SUPPORT AND SERVICE MANAGEMENT", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Incident Management:</b> Handling service tickets efficiently.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>User Support:</b> Providing technical assistance to end users.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Documentation:</b> Creating/maintaining system documentation.</div>`}, { title: "7. PROJECT MANAGEMENT AND COORDINATION", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Project Implementation:</b> Assisting/leading IT infrastructure projects.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Collaboration:</b> Working with other teams.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Vendor Management:</b> Coordinating with third-party vendors.</div>`}, { title: "8. CUSTOMER SERVICE AND COMMUNICATION", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Clear Communication:</b> Explaining technical issues clearly.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Client Interaction:</b> Providing excellent customer service.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Training and Knowledge Sharing:</b> Educating users/colleagues.</div>`}, { title: "9. TIME MANAGEMENT AND EFFICIENCY", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Task Prioritization:</b> Managing multiple requests effectively.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Efficiency:</b> Completing tasks without compromising quality.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Deadline Adherence:</b> Meeting project deadlines.</div>`}, { title: "10. ADAPTABILITY AND CONTINUOUS LEARNING", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Learning Agility:</b> Staying updated with emerging tech.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Certification and Training:</b> Pursuing relevant certifications (CompTIA, MCSA, CCNA).</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Adaptability:</b> Adapting to new tools/technologies.</div>`}, { title: "11. VENDOR AND CONTRACT MANAGEMENT", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Vendor Relationships:</b> Managing vendor interactions.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Contract Management:</b> Ensuring adherence to SLAs.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Cost Management:</b> Managing procurement/support costs.</div>`}, { title: "12. PERFORMANCE METRICS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>System Uptime:</b> Maintaining high system availability.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Response Time:</b> Meeting support ticket response targets.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>End-User Satisfaction:</b> Monitoring user feedback.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Issue Resolution Time:</b> Average time to resolve issues.</div>`}, { title: "13. LEADERSHIP AND INITIATIVE (IF APPLICABLE)", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Team Leadership:</b> Guiding IT support staff.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Taking Initiative:</b> Proactively suggesting improvements.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Mentoring:</b> Helping junior team members.</div>`} ],
             "Permit Applicant": [ /* ... keep existing ... */ { title: "1. COMPLIANCE WITH REQUIREMENTS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Zoning/Land Use:</b> Ensuring project aligns with local laws.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Environmental Impact:</b> Compliance with environmental regulations.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Health & Safety Standards:</b> Adherence to H&S regulations.</div>`}, { title: "2. FINANCIAL STABILITY", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Ability to Pay Fees:</b> Ensuring applicant can cover permit fees.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Financial Responsibility:</b> Verifying resources to complete the project.</div>`}, { title: "3. EXPERIENCE AND QUALIFICATIONS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Technical Expertise:</b> Demonstrating necessary technical skills (if required).</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Past Compliance Record:</b> History of compliance.</div>`}, { title: "4. PUBLIC SAFETY AND WELFARE", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Impact on Public Safety:</b> Ensuring project poses no threat.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Community Impact:</b> Assessing effects on noise, traffic, etc.</div>`}, { title: "5. APPLICATION COMPLETENESS AND ACCURACY", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Proper Documentation:</b> Submitting all required documents.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Accuracy of Information:</b> Verifying provided information.</div>`}, { title: "6. DURATION AND SCOPE OF THE PERMIT", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Project Timeline:</b> Adherence to projected timeline.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Compliance Monitoring:</b> Willingness to comply with monitoring.</div>`}, { title: "7. PUBLIC ENGAGEMENT (IF APPLICABLE)", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Community Consultation:</b> Engaging with the local community.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Public Comments:</b> Consideration of public feedback.</div>`}, { title: "8. ENVIRONMENTAL CONSIDERATIONS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Sustainability Practices:</b> Incorporating sustainable methods.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Permitting for Environmental Factors:</b> Compliance with specific environmental rules.</div>`}, { title: "9. RISK ASSESSMENT", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Risk to Environment/Property:</b> Assessment of potential risks.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Contingency Plans:</b> Providing plans for high-risk activities.</div>`} ],
             "Permit Holder": [ /* ... keep existing ... */ { title: "1. COMPLIANCE WITH REGULATIONS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Knowledge of Laws:</b> Understanding relevant legal/safety/environmental rules.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Adherence to Conditions:</b> Strictly following all permit conditions.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Environmental Compliance:</b> Complying with environmental protection laws.</div>`}, { title: "2. SAFETY MANAGEMENT", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Safety Protocols:</b> Implementing and enforcing safety measures.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Hazard ID & Risk Assessment:</b> Identifying hazards and mitigation.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Emergency Procedures:</b> Ensuring proper emergency preparedness.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Incident Reporting:</b> Prompt reporting and corrective actions.</div>`}, { title: "3. DOCUMENTATION AND RECORD KEEPING", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Accurate Documentation:</b> Maintaining records of permit activities.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Audit Readiness:</b> Keeping documents organized for inspection.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Reporting Obligations:</b> Timely submission of required reports.</div>`}, { title: "4. OPERATIONAL COMPETENCE", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Technical Knowledge:</b> Understanding operations covered by the permit.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Supervision and Oversight:</b> Managing operations and contractors effectively.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Resource Management:</b> Efficient use of materials, equipment, personnel.</div>`}, { title: "5. TRAINING AND COMPETENCE OF PERSONNEL", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Qualified Workforce:</b> Ensuring personnel are trained/certified.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Ongoing Training:</b> Providing continuous training.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Competency in Permit Requirements:</b> Ensuring understanding of permit conditions.</div>`}, { title: "6. PERFORMANCE MONITORING AND REPORTING", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Inspection and Monitoring:</b> Regularly checking work for compliance.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Corrective Actions:</b> Taking timely action on deviations.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Performance Reviews:</b> Ongoing evaluation against permit objectives.</div>`}, { title: "7. ENVIRONMENTAL AND SOCIAL RESPONSIBILITY", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Sustainability Efforts:</b> Implementing waste management, conservation.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Community Impact:</b> Minimizing negative effects on communities/ecosystems.</div>`}, { title: "8. TIMELINESS AND PROJECT MANAGEMENT", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Adherence to Deadlines:</b> Conducting activities within permit timeframes.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Project Execution:</b> Effective management to complete projects on plan/budget.</div>`}, { title: "9. COMMUNICATION WITH AUTHORITIES", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Engagement with Regulators:</b> Maintaining professional relationship.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Transparency:</b> Being open about operations and issues.</div>`}, { title: "10. HISTORY OF COMPLIANCE", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Past Performance:</b> Track record of compliance.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Violation History:</b> Low or non-existent history of violations.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Corrective Actions Taken:</b> Demonstrated ability to fix past issues.</div>`}, { title: "11. ETHICS AND PROFESSIONALISM", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Integrity:</b> Operating in good faith and adhering to law.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Professionalism in Operations:</b> Conducting activities ethically.</div>`} ],
             "Pipe Fitter": [ /* ... keep existing ... */ { title: "1. TECHNICAL SKILLS & KNOWLEDGE", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Pipe Fitting Techniques:</b> Ability to read blueprints, schematics.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Welding Skills:</b> Proficiency in TIG, MIG, stick welding.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Cutting and Bending:</b> Skill in cutting, threading, bending pipes.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Pipe Sizing:</b> Understanding sizes, materials, design.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Installation Process:</b> Knowledge of alignment, leveling, securing.</div>`}, { title: "2. KNOWLEDGE OF STANDARDS & CODES", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Regulations Compliance:</b> Familiarity with ASME, API, ANSI.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Safety Standards:</b> Adherence to safety protocols, PPE use.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Environmental Compliance:</b> Understanding environmental requirements.</div>`}, { title: "3. PROBLEM-SOLVING & TROUBLESHOOTING", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Identifying Issues:</b> Ability to find alignment problems, leaks.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Corrective Action:</b> Quick and effective problem-solving.</div>`}, { title: "4. QUALITY OF WORK", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Precision and Accuracy:</b> High precision in cutting, fitting, assembly.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Leak-Free Installations:</b> Ensuring no leaks.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Durability and Strength:</b> Ensuring installation meets pressure/temp needs.</div>`}, { title: "5. TIME MANAGEMENT", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Efficiency:</b> Completing tasks timely without compromising quality/safety.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Project Milestones:</b> Ability to meet deadlines.</div>`}, { title: "6. COMMUNICATION SKILLS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Team Collaboration:</b> Working well with others.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Reporting:</b> Providing clear work reports.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Instructional Ability:</b> Ability to mentor/train others.</div>`}, { title: "7. SAFETY RECORD", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Workplace Safety:</b> Proven track record of following safety protocols.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Safety Inspections:</b> Participation in inspections/hazard assessments.</div>`}, { title: "8. EXPERIENCE AND CERTIFICATION", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Relevant Experience:</b> Years of experience with flowline/piping systems.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Certifications:</b> Holding NCCER or similar qualifications.</div>`}, { title: "9. PHYSICAL CONDITION AND STAMINA", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Physical Fitness:</b> Strength/endurance for demanding tasks.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Stamina and Dexterity:</b> Ability for repetitive tasks/extended hours.</div>`}, { title: "10. ADAPTABILITY AND LEARNING", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Adaptability to New Technologies:</b> Willingness to learn new methods.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Continuous Improvement:</b> Commitment to ongoing development.</div>`} ],
             "Quality Control": [ /* ... keep existing ... */ { title: "1. ACCURACY AND PRECISION", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Consistency in results:</b> QC should consistently ensure that products or services meet defined specifications.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Error detection:</b> A good QC system is effective at identifying and addressing defects, inconsistencies, or non-conformities.</div>`}, { title: "2. ADHERENCE TO STANDARDS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Compliance:</b> Aligning with ISO, industry, gov regulations.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Documentation:</b> Ensuring procedures are documented and followed.</div>`}, { title: "3. EFFICIENCY OF PROCESSES", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Timeliness:</b> QC process not causing delays.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Resource utilization:</b> Optimal use of manpower, tools, materials.</div>`}, { title: "4. DEFECT DETECTION & PREVENTION", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Prevention focus:</b> Proactively identifying root causes.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Types of defects caught:</b> Effectiveness in identifying various defects.</div>`}, { title: "5. TRAINING AND EXPERTISE", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Skills of QC personnel:</b> Competency in applying QC measures.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Ongoing development:</b> Support for learning and certification.</div>`}, { title: "6. DOCUMENTATION AND REPORTING", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Accuracy of records:</b> Clear records of inspections, tests, actions.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Transparency & traceability:</b> Documentation allows traceability.</div>`}, { title: "7. CUSTOMER SATISFACTION", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Feedback incorporation:</b> Tracking and using customer feedback.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Post-delivery performance:</b> Monitoring product/service performance.</div>`}, { title: "8. CORRECTIVE & PREVENTIVE ACTIONS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Root cause analysis:</b> Identifying underlying causes of defects.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Follow-up actions:</b> Taking steps to prevent recurrence.</div>`}, { title: "9. CONTINUOUS IMPROVEMENT", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Process improvement:</b> Regular review of QC process.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Metrics and KPIs:</b> Establishing and measuring quality KPIs.</div>`}, { title: "10. COST-EFFECTIVENESS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Cost of quality:</b> Evaluating costs of prevention, detection, failure.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Return on investment (ROI):</b> QC showing positive ROI.</div>`} ],
             "Quantity Surveyor": [ /* ... keep existing ... */ { title: "1. TECHNICAL KNOWLEDGE & EXPERTISE", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Cost Estimation:</b> Accurate cost estimates from drawings/specs.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Bill of Quantities (BOQ):</b> Preparing/managing BOQs.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Construction Techniques:</b> Understanding methods and cost implications.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Contractual Knowledge:</b> Strong grasp of NEC, FIDIC, JCT.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Value Engineering:</b> Optimizing costs while maintaining quality.</div>`}, { title: "2. PROJECT MANAGEMENT & COORDINATION", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Budget Management:</b> Managing and controlling project budgets.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Cost Monitoring & Reporting:</b> Tracking costs and reporting variances.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Cash Flow Forecasting:</b> Managing project cash flow.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Tendering & Procurement:</b> Managing bids and contractor selection.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Risk Management:</b> Identifying and managing financial risks.</div>`}, { title: "3. ANALYTICAL & PROBLEM-SOLVING", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Cost Analysis:</b> Analyzing cost reports for savings/discrepancies.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Dispute Resolution:</b> Skill in resolving cost/contract disputes.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Problem-Solving:</b> Addressing cost overruns, variations effectively.</div>`}, { title: "4. COMMUNICATION & INTERPERSONAL", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Collaboration:</b> Working with architects, engineers, contractors.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Client Communication:</b> Clearly communicating cost info.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Negotiation Skills:</b> Managing variations and claims.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Presentation Skills:</b> Presenting cost reports.</div>`}, { title: "5. ATTENTION TO DETAIL & ACCURACY", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Accuracy:</b> Meticulous measurement and calculation.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Consistency & Precision:</b> Ensuring reports are precise.</div>`}, { title: "6. KNOWLEDGE OF STANDARDS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Building Codes:</b> Familiarity with relevant codes/regulations.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Health & Safety:</b> Understanding H&S cost implications.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Sustainability:</b> Knowledge of green practices and costs.</div>`}, { title: "7. EXPERIENCE & QUALIFICATIONS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Educational Background:</b> Relevant degree (QS, Civil Eng).</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Professional Experience:</b> Demonstrated history in QS roles.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>CPD:</b> Commitment to ongoing learning.</div>`}, { title: "8. SOFTWARE PROFICIENCY", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Cost Estimation Software:</b> Familiarity with tools (CostX, Procore).</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Excel & Data Management:</b> Advanced Excel skills.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>BIM:</b> Knowledge of using BIM for cost estimation.</div>`}, { title: "9. LEADERSHIP & MANAGEMENT", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Team Leadership:</b> Ability to manage/mentor junior staff.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Decision-Making:</b> Strong financial/contractual decisions.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Client-Focused Mindset:</b> Meeting client requirements.</div>`}, { title: "10. ETHICS & PROFESSIONAL INTEGRITY", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Transparency & Honesty:</b> Acting with integrity.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Ethical Behavior:</b> Adherence to professional standards.</div>`}, { title: "11. TIME MANAGEMENT & EFFICIENCY", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Project Timelines:</b> Meeting deadlines for reports, tenders.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Multitasking:</b> Handling multiple projects effectively.</div>`}, { title: "12. ADAPTABILITY & CONTINUOUS IMPROVEMENT", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Adapting to Changes:</b> Managing scope/budget changes.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Innovation:</b> Seeking innovative cost management methods.</div>`} ],
             "Site Engineer - Electrical": [ /* ... keep existing ... */ { title: "1. TECHNICAL KNOWLEDGE", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Electrical Systems Understanding:</b> Proficiency in designing, installing, testing, and maintaining electrical systems.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Codes & Standards:</b> Knowledge of NEC, IEC.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Circuit Design & Analysis:</b> Ability to calculate load requirements, cable sizes.</div>`}, { title: "2. PROBLEM-SOLVING & TROUBLESHOOTING", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Diagnostics:</b> Capability to quickly diagnose electrical faults.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Practical Application:</b> Applying theory to real-world problems.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Troubleshooting Skills:</b> Efficiently identifying and resolving malfunctions.</div>`}, { title: "3. PROJECT MANAGEMENT & PLANNING", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Scheduling & Coordination:</b> Managing timelines, coordinating teams.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Resource Allocation:</b> Ensuring resource availability.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Progress Monitoring:</b> Assessing progress and adjusting.</div>`}, { title: "4. QUALITY CONTROL AND SAFETY", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Adherence to Safety Standards:</b> Ensuring work follows safety protocols.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Quality Assurance:</b> Ensuring installations meet high standards.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Inspection and Testing:</b> Verifying compliance.</div>`}, { title: "5. DESIGN AND TECHNICAL DRAWINGS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Interpretation of Drawings:</b> Ability to read electrical drawings/blueprints.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Design Modifications:</b> Making necessary adjustments on site.</div>`}, { title: "6. BUDGET AND COST CONTROL", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Cost Estimation:</b> Ability to estimate costs for electrical works.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Cost Control:</b> Monitoring expenditures against budget.</div>`}, { title: "7. TEAM LEADERSHIP AND COLLABORATION", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Team Supervision:</b> Leading electrical teams on-site.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Collaboration:</b> Working closely with other engineers/contractors.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Conflict Resolution:</b> Handling site conflicts professionally.</div>`}, { title: "8. DOCUMENTATION AND REPORTING", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Record Keeping:</b> Maintaining accurate work records.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Reporting:</b> Providing regular progress reports.</div>`}, { title: "9. COMMUNICATION SKILLS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Clear Communication:</b> Effectively communicating technical information.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Reporting and Documentation:</b> Preparing clear reports/documents.</div>`}, { title: "10. REGULATORY AND COMPLIANCE KNOWLEDGE", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Compliance:</b> Ensuring work meets local regulations/codes.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Permit and License Management:</b> Handling necessary permits.</div>`}, { title: "11. ADAPTABILITY AND FLEXIBILITY", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Responding to Changes:</b> Adapting to changing conditions.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Handling Unforeseen Issues:</b> Dealing with unexpected problems.</div>`}, { title: "12. CLIENT INTERACTION AND CUSTOMER FOCUS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Customer Orientation:</b> Engaging professionally with clients.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Client Satisfaction:</b> Meeting client expectations.</div>`}, { title: "13. TIME MANAGEMENT", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Efficient Task Management:</b> Completing tasks on time.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Handling Deadlines:</b> Meeting project deadlines.</div>`}, { title: "14. SUSTAINABILITY AND ENERGY EFFICIENCY", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Energy-Efficient Solutions:</b> Knowledge of efficient solutions.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Sustainable Practices:</b> Incorporating green practices.</div>`}, { title: "15. CONTINUOUS LEARNING AND DEVELOPMENT", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Technical Upgrades:</b> Staying updated on trends/tech.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Professional Development:</b> Pursuing certifications/training.</div>`} ],
             "Site Engineer": [ /* ... keep existing ... */ { title: "1. TECHNICAL KNOWLEDGE", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Understanding of Engineering Principles:</b> Strong knowledge (Civil, Mech, Elec).</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Knowledge of Construction Methods:</b> Understanding techniques, materials.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Blueprint Interpretation:</b> Ability to read plans/specs.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Problem-Solving:</b> Troubleshooting site issues.</div>`}, { title: "2. PROJECT MANAGEMENT", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Planning & Scheduling:</b> Managing daily operations, timelines.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Resource Management:</b> Efficient use of labor, materials.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Budget Control:</b> Managing costs.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Quality Control:</b> Ensuring work meets standards.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Risk Management:</b> Identifying/mitigating risks.</div>`}, { title: "3. SAFETY AND COMPLIANCE", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Safety Standards:</b> Adherence to safety regulations.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Risk Assessment:</b> Conducting safety assessments.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Compliance:</b> Ensuring project meets codes/laws.</div>`}, { title: "4. LEADERSHIP & TEAM MANAGEMENT", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Team Coordination:</b> Leading workers and subcontractors.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Decision Making:</b> Making informed decisions quickly.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Conflict Resolution:</b> Managing site conflicts.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Delegation:</b> Delegating tasks effectively.</div>`}, { title: "5. COMMUNICATION SKILLS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Clear Communication:</b> Communicating with teams, clients, management.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Reporting:</b> Providing accurate progress reports.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Stakeholder Interaction:</b> Interfacing with clients, suppliers.</div>`}, { title: "6. TECHNICAL TOOLS PROFICIENCY", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Engineering Software:</b> Proficiency in AutoCAD, MS Project, etc.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Data Management:</b> Organizing project documentation.</div>`}, { title: "7. ATTENTION TO DETAIL", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Accuracy in Execution:</b> Ensuring work follows specs.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Quality Assurance:</b> Regularly inspecting work.</div>`}, { title: "8. ADAPTABILITY & PROBLEM-SOLVING", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Handling Challenges:</b> Adapting to changing conditions.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Innovation:</b> Proposing efficiency improvements.</div>`}, { title: "9. TIME MANAGEMENT & EFFICIENCY", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Deadline Adherence:</b> Ensuring project completion on time.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Efficiency:</b> Maintaining productivity.</div>`}, { title: "10. ENVIRONMENTAL AWARENESS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Sustainable Practices:</b> Awareness of eco-friendly methods.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Environmental Compliance:</b> Ensuring regulations are followed.</div>`}, { title: "11. CLIENT & STAKEHOLDER MANAGEMENT", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Client Requirements:</b> Ensuring needs are met.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Change Management:</b> Managing scope/cost changes.</div>`}, { title: "12. ETHICS AND PROFESSIONALISM", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Integrity:</b> Displaying honesty.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Professionalism:</b> Maintaining professional demeanor.</div>`}, { title: "13. PREVIOUS EXPERIENCE", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Track Record:</b> Evaluation of past projects.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>References:</b> Positive feedback.</div>`}, { title: "14. CONTINUOUS LEARNING", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Ongoing Education:</b> Staying updated.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Certifications:</b> Holding relevant certs (PMP, LEED).</div>`} ],
             "Stores Engineer - General": [ /* ... keep existing ... */ { title: "1. TECHNICAL KNOWLEDGE", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Inventory Management:</b> Knowledge of systems, procedures.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Materials/Equipment:</b> Familiarity with industry items.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Warehousing:</b> Understanding layout, storage methods.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Technology:</b> Proficiency with barcode/RFID/WMS.</div>`}, { title: "2. ORGANIZATIONAL SKILLS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Inventory Control:</b> Implementing accurate tracking.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Stock Replenishment:</b> Forecasting and managing stock levels.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Procurement Coordination:</b> Managing sourcing and purchasing.</div>`}, { title: "3. HSE & COMPLIANCE", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Adherence to Safety Standards:</b> Ensuring work follows safety protocols for storage and handling.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Material Handling Safety:</b> Understanding correct procedures for lifting, storing hazardous materials.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Warehouse Safety:</b> Maintaining a safe storage environment.</div>`}, { title: "4. PROBLEM-SOLVING", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Discrepancy Resolution:</b> Identifying and resolving stock count or quality issues.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Logistics Issues:</b> Addressing delays or problems in receiving/dispatch.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Space Optimization:</b> Finding solutions for storage constraints.</div>`}, { title: "5. QUALITY CONTROL", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Receiving Inspections:</b> Checking incoming goods against orders and quality specs.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Storage Conditions:</b> Ensuring items are stored correctly to prevent damage/degradation.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Expiry Management:</b> Monitoring and managing shelf-life sensitive items.</div>`}, { title: "6. COMMUNICATION", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Interdepartmental Liaison:</b> Communicating effectively with procurement, projects, finance.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Supplier Communication:</b> Coordinating deliveries and resolving issues with suppliers.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Reporting:</b> Providing clear stock level, discrepancy, and activity reports.</div>`}, { title: "7. PROJECT MANAGEMENT", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Stocktake Planning:</b> Organizing and executing inventory counts.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Logistics Coordination:</b> Planning material flow for projects.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Resource Management:</b> Managing stores personnel and equipment.</div>`}, { title: "8. TECH PROFICIENCY", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>WMS/ERP Systems:</b> Proficiency in using warehouse or inventory management software.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Data Entry Accuracy:</b> Ensuring precise data input for transactions.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Reporting Tools:</b> Ability to generate reports from the system.</div>`}, { title: "9. LEADERSHIP (If applicable)", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Team Supervision:</b> Leading and guiding stores staff.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Task Delegation:</b> Assigning duties effectively.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Training:</b> Mentoring junior staff on procedures.</div>`}, { title: "10. EXPERIENCE", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Industry Experience:</b> Relevant experience in stores/warehouse management within construction/engineering.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Knowledge of Materials:</b> Familiarity with construction materials and equipment.</div>`}, { title: "11. EFFICIENCY & COST CONTROL", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Inventory Turnover:</b> Managing stock levels to optimize turnover.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Minimizing Waste:</b> Reducing stock obsolescence and damage.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Process Optimization:</b> Identifying ways to improve store operations efficiency.</div>`}, { title: "12. ADAPTABILITY", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Handling Fluctuations:</b> Adapting to changes in demand or project needs.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>New Systems/Processes:</b> Willingness to learn and adapt to new technologies or procedures.</div>`}, { title: "13. STORES KPI", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>KNOWLEDGE IN STORES KPI TIMELINE ALONG WITH NECESSARY COMPLIANCE</b></div>`}, { title: "14. SCRAP MANAGEMENT", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>KNOWLEDGE IN SCRAP MANAGEMENT , SCRAP SEGREGATION AND MAINTAINING THE INVENTORY BASED ON THE TYPE OF SCRAP</b></div>`} ],
             "Supervisor - Security": [ /* ... keep existing ... */ { title: "1. LEADERSHIP & TEAM MGMT", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Team Supervision:</b> Ability to manage and oversee a security team.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Motivation:</b> Ability to motivate security staff.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Training and Development:</b> Providing ongoing training.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Conflict Resolution:</b> Handling interpersonal issues.</div>`}, { title: "2. SECURITY KNOWLEDGE", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Security Procedures:</b> Knowledge of protocols (access control, surveillance).</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Risk Assessment:</b> Assessing and mitigating security risks.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Emergency Response:</b> Managing and responding to emergencies.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Systems Management:</b> Understanding CCTV, alarms, access control.</div>`}, { title: "3. DECISION-MAKING", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Crisis Management:</b> Making sound decisions under pressure.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Problem-Solving:</b> Identifying and resolving security issues.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Judgment and Discretion:</b> Exercising sound judgment.</div>`}, { title: "4. COMMUNICATION SKILLS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Clear Reporting:</b> Providing detailed reports.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Briefing & Coordination:</b> Communicating with other dept/agencies.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Interpersonal Communication:</b> Engaging professionally.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Conflict De-escalation:</b> Handling confrontations.</div>`}, { title: "5. SURVEILLANCE & MONITORING", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Monitoring Systems:</b> Ensuring continuous monitoring.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Patrol Oversight:</b> Supervising patrols.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Incident Documentation:</b> Ensuring proper recording.</div>`}, { title: "6. COMPLIANCE & LEGAL", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Regulatory Compliance:</b> Knowledge of relevant laws.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Adherence to Policies:</b> Ensuring compliance with company policy.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Confidentiality:</b> Maintaining strict confidentiality.</div>`}, { title: "7. OPERATIONAL EFFICIENCY", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Scheduling:</b> Efficiently scheduling personnel.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Cost Control:</b> Operating within budget.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Process Improvement:</b> Identifying efficiency improvements.</div>`}, { title: "8. PHYSICAL FITNESS & READINESS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Physical Fitness:</b> Ensuring team capability.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Equipment Handling:</b> Proficiency with security gear.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Health & Safety:</b> Focus on team safety.</div>`}, { title: "9. CUSTOMER SERVICE", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Client Interaction:</b> Professional interaction.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Proactive Measures:</b> Engaging clients on concerns.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Customer Satisfaction:</b> Monitoring stakeholder satisfaction.</div>`}, { title: "10. PERFORMANCE MONITORING", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>KPIs:</b> Tracking security metrics.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Incident Reporting:</b> Ensuring prompt reporting/investigation.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Security Audits:</b> Conducting regular audits.</div>`}, { title: "11. ADAPTABILITY & LEARNING", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Adapting Environments:</b> Adjusting strategies.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Continuous Learning:</b> Staying updated.</div>`}, { title: "12. TECHNOLOGY PROFICIENCY", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Tech Management:</b> Operating/troubleshooting security tech.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Tech Integration:</b> Understanding new tech benefits.</div>`}, { title: "13. EMERGENCY PREPAREDNESS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Emergency Drills:</b> Overseeing effective drills.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Incident Command:</b> Leading emergency response.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Risk Assessment:</b> Assessing emergency risks.</div>`}, { title: "14. INTEGRITY & PROFESSIONALISM", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Ethics & Accountability:</b> High integrity.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Trustworthiness:</b> Demonstrating honesty/discretion.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Professional Development:</b> Continuing self-improvement.</div>`}, { title: "15. KEY PERFORMANCE METRICS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Response Time:</b> Speed of incident handling.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Incident Frequency:</b> Monitoring/reducing incidents.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;"><b>Staff Retention:</b> Retaining qualified staff.</div>`} ],
              // Requirement I: Add Behaviour metrics
              "Behaviour": [
                  { title: "1. TECHNICAL SKILLS AND KNOWLEDGE", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;">Demonstrates required technical skills and understanding for the role.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;">Applies technical knowledge effectively to tasks.</div>` },
                  { title: "2. KNOWLEDGE OF INDUSTRY STANDARDS AND CODES", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;">Understands relevant industry standards and codes.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;">Applies standards and codes consistently in work.</div>` },
                  { title: "3. PROBLEM-SOLVING AND TROUBLESHOOTING", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;">Identifies issues effectively.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;">Develops practical solutions to problems.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;">Troubleshoots challenges efficiently.</div>` },
                  { title: "4. QUALITY OF WORK", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;">Produces work that meets quality standards.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;">Pays attention to detail and accuracy.</div>` },
                  { title: "5. TIME MANAGEMENT", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;">Manages time effectively to meet deadlines.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;">Prioritizes tasks appropriately.</div>` },
                  { title: "6. COMMUNICATION SKILLS", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;">Communicates clearly and professionally (verbal and written).</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;">Listens actively and collaborates well with others.</div>` },
                  { title: "7. SAFETY RECORD", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;">Adheres to safety protocols and procedures.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;">Promotes a safe working environment.</div>` },
                  { title: "8. EXPERIENCE AND CERTIFICATION", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;">Possesses relevant experience for the role.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;">Maintains necessary certifications (if applicable).</div>` },
                  { title: "9. PHYSICAL CONDITION AND STAMINA", details: `<div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;">Maintains physical condition required for the job.</div><div style="border: 1px solid #ddd; padding: 2px; margin: 0; margin-bottom: 3px;">Demonstrates adequate stamina for tasks.</div>` }
              ]
        };

        // --- Helper Functions (Show/Hide Spinners & Button Loading) ---
        function showSpinner(spinnerId) { /* ... Keep original ... */ const spinner = document.getElementById(spinnerId); if (spinner) spinner.style.display = 'inline-block'; }
        function hideSpinner(spinnerId) { /* ... Keep original ... */ const spinner = document.getElementById(spinnerId); if (spinner) spinner.style.display = 'none'; }
        function setButtonLoading(buttonElement, isLoading) { /* ... Keep original ... */ if (!buttonElement) return; if (isLoading) { buttonElement.classList.add('loading'); buttonElement.disabled = true; } else { buttonElement.classList.remove('loading'); buttonElement.disabled = false; } }

        // --- Show/Hide Pages (MODIFIED for Transitions - Requirement II) ---
        function showPage(pageElement) {
            if (!pageElement) return;
            // Apply initial styles for transition entry
            pageElement.style.opacity = '0';
            pageElement.style.transform = 'scale(0.98)'; // Optional scale effect
            pageElement.style.display = 'block';

            // Use requestAnimationFrame to ensure 'display: block' is applied before transition starts
            requestAnimationFrame(() => {
                pageElement.style.opacity = '1';
                pageElement.style.transform = 'scale(1)';
                pageElement.classList.add('visible'); // Add visible class
            });
             window.scrollTo(0, 0);
        }

        function hidePage(pageElement, onHiddenCallback) {
            if (!pageElement || pageElement.style.display === 'none') {
                if (onHiddenCallback) onHiddenCallback();
                return;
            }
            // Apply styles for transition exit
            pageElement.style.opacity = '0';
            pageElement.style.transform = 'scale(0.98)'; // Optional scale effect
            pageElement.classList.remove('visible'); // Remove visible class

            // Wait for transition to finish before setting display: none
            setTimeout(() => {
                pageElement.style.display = 'none';
                 // Reset transform for next show
                 pageElement.style.transform = 'scale(1)';
                if (onHiddenCallback) onHiddenCallback();
            }, TRANSITION_DURATION); // Use constant duration
        }

        function showWelcomeMessageFromEval() {
            hidePage(evaluationPageElement);
            hidePage(evaluationFormContainerElement, () => {
                 // After form is hidden, show welcome page
                 if (welcomePageElement) {
                    welcomePageElement.style.display = 'block'; // Make welcome page block first
                    showPage(welcomePageElement); // Apply transition
                    if (loginContainerElement) loginContainerElement.style.display = 'block'; // Ensure login is visible within it
                    if (welcomeMessageContainerElement) welcomeMessageContainerElement.style.display = 'none';
                    document.querySelectorAll('.background-panel').forEach(p => p.style.display = 'block');
                 }
                 document.body.classList.add('gradient-background');
            });
        }

        function showEvaluationPage() {
            hidePage(welcomeMessageContainerElement); // Hide welcome message if visible
            hidePage(evaluationFormContainerElement); // Hide form if visible
            hidePage(welcomePageElement, () => {
                 // After welcome page is hidden, show evaluation list
                 showPage(evaluationPageElement);
                 document.body.classList.add('gradient-background');
            });
        }

        function showEvaluationFormByType(formType) {
             console.log("Showing form for:", formType);
             currentFormType = formType;

             hidePage(evaluationPageElement);
             hidePage(welcomePageElement, () => {
                  // After other pages are hidden, prepare and show form
                  if (formTypeIndicatorSpan) { formTypeIndicatorSpan.textContent = formType ? formType.toUpperCase() : 'SELECT FORM TYPE'; }
                  clearAllFormInputs();
                  renderMetrics(formType);
                  if (overallPerformanceText) { overallPerformanceText.textContent = "Please rate all metrics."; }
                  showPage(evaluationFormContainerElement);
                  document.body.classList.remove('gradient-background');
             });
        }

        // --- Clear Functions (Original Logic + Date Picker Clear) ---
        function clearAllFormInputs() { /* ... Keep original ... */
             if (employeeNumberInput) employeeNumberInput.value = ''; clearEmployeeFields();
             if (reviewerNumberInput) reviewerNumberInput.value = ''; clearReviewerFields();
             if (witness2NumberInput) witness2NumberInput.value = ''; clearWitness2Fields();
             if (witness3NumberInput) witness3NumberInput.value = ''; clearWitness3Fields();
             if (hodNumberInput) hodNumberInput.value = ''; clearHODFields();
             if (flatpickrInstance) { flatpickrInstance.clear(); }
             const remarksTextArea = document.getElementById("remarks"); if (remarksTextArea) remarksTextArea.value = '';
             document.querySelectorAll('.signature-date-input').forEach(input => input.value = '');
             if (metricsContainer) {
                 metricsContainer.querySelectorAll('input[type="radio"]').forEach(radio => radio.checked = false);
                 metricsContainer.querySelectorAll('.rating-option.selected').forEach(opt => opt.classList.remove('selected'));
                 metricsContainer.querySelectorAll('textarea').forEach(textarea => textarea.value = '');
                 metricsContainer.querySelectorAll('.performance-feedback.expanded').forEach(item => { item.classList.remove('expanded'); const indicator = item.querySelector('.metric-indicator'); if (indicator) { indicator.classList.remove('fa-chevron-up'); indicator.classList.add('fa-chevron-down'); } const titleToggle = item.querySelector('.metric-toggle'); if (titleToggle) titleToggle.classList.remove('highlighted'); });
             }
             resetHighlightedFields(); updateOverallPerformance();
         }
         function clearEmployeeFields() { /* ... Keep original ... */ if (employeeNameInput) employeeNameInput.value = ''; if (positionTextInput) positionTextInput.value = ''; if (employeeGroupInput) employeeGroupInput.value = ''; if (divisionTextInput) divisionTextInput.value = ''; if (departmentTextInput) departmentTextInput.value = ''; if (emailInput) emailInput.value = ''; if (contactInput) contactInput.value = ''; const empNumSig = document.getElementById("employee-number-signature"); const empNameSig = document.getElementById("employee-name-signature"); const empPosSig = document.getElementById("position-signature"); if(empNumSig) empNumSig.value = ''; if(empNameSig) empNameSig.value = ''; if(empPosSig) empPosSig.value = ''; hideSpinner('emp-spinner');}
         function clearReviewerFields() { /* ... Keep original ... */ if (reviewerNameInput) reviewerNameInput.value = ''; const revNumSig = document.getElementById("reviewer-number-signature"); const revNameSig = document.getElementById("reviewer-name-signature"); const revPosSig = document.getElementById("reviewer-position-signature"); if(revNumSig) revNumSig.value = ''; if(revNameSig) revNameSig.value = ''; if(revPosSig) revPosSig.value = ''; hideSpinner('reviewer-spinner');}
         function clearWitness2Fields() { /* ... Keep original ... */ if (witness2NameInput) witness2NameInput.value = ''; if (witness2PosInput) witness2PosInput.value = ''; hideSpinner('witness1-spinner');}
         function clearWitness3Fields() { /* ... Keep original ... */ if (witness3NameInput) witness3NameInput.value = ''; if (witness3PosInput) witness3PosInput.value = ''; hideSpinner('witness2-spinner');}
         function clearHODFields() { /* ... Keep original ... */ if (hodNameInput) hodNameInput.value = ''; if (hodPosInput) hodPosInput.value = ''; hideSpinner('hod-spinner');}

        // --- Metrics Rendering (Original) ---
        function renderMetrics(formType) { /* ... Keep original function ... */
             if (!metricsContainer) { console.error("Metrics container missing."); return; } metricsContainer.innerHTML = ''; const currentMetrics = allMetricsData[formType] || []; if (currentMetrics.length === 0 && formType) { metricsContainer.innerHTML = "<p style='color:#dc3545;text-align:center;padding:15px;'>Metrics not found.</p>"; return; }
             currentMetrics.forEach((metric, index) => { const metricDiv = document.createElement("div"); metricDiv.classList.add("performance-feedback"); let ratingOptionsHTML = ""; for (let i = 1; i <= 5; i++) { const radioId = `rating-${formType.replace(/\s+/g, '-')}-${index}-${i}`; const radioName = `rating-${formType.replace(/\s+/g, '-')}-${index}`; const description = RATING_DESCRIPTIONS[i] || `Rating ${i}`; ratingOptionsHTML += `<label class="rating-option" for="${radioId}"><input type="radio" name="${radioName}" value="${i}" id="${radioId}"><div class="rating-number">${i}</div><span class="rating-text">${description}</span></label>`; } const commentId = `comments-${formType.replace(/\s+/g, '-')}-${index}`; const hrCommentId = `hr-comments-${formType.replace(/\s+/g, '-')}-${index}`; metricDiv.innerHTML = ` <div class="ac-metric-title metric-toggle"><span><b>${metric.title||`Metric ${index+1}`}</b></span><span class="metric-indicator fas fa-chevron-down"></span></div> <div class="metric-content"> <div class="metric-details-container">${metric.details||"No details."}</div> <div class="metric-rating-box"><div class="rating-scale">${ratingOptionsHTML}</div></div> <div class="ac-comments-container"> <div><label for="${commentId}" class="required-field">Employee Comments:</label><textarea id="${commentId}" rows="3" placeholder="Enter comments..." class="required"></textarea></div> <div><label for="${hrCommentId}">HR Comments:</label><textarea id="${hrCommentId}" rows="3" placeholder="Enter HR comments..."></textarea></div> </div> </div>`; metricsContainer.appendChild(metricDiv); });
             metricsContainer.removeEventListener("change", handleRatingChange); metricsContainer.addEventListener("change", handleRatingChange); metricsContainer.removeEventListener("click", handleAccordionToggle); metricsContainer.addEventListener("click", handleAccordionToggle);
        }

        // --- Accordion Toggle (Original) ---
        function handleAccordionToggle(event) { /* ... Keep original function ... */
            const toggleButton = event.target.closest('.metric-toggle'); if (!toggleButton) return; event.preventDefault(); const metricItem = toggleButton.closest('.performance-feedback'); const indicator = toggleButton.querySelector('.metric-indicator'); if (metricItem && indicator) { metricItem.classList.toggle('expanded'); if (metricItem.classList.contains('expanded')) { indicator.classList.remove('fa-chevron-down'); indicator.classList.add('fa-chevron-up'); toggleButton.classList.remove('highlighted'); } else { indicator.classList.remove('fa-chevron-up'); indicator.classList.add('fa-chevron-down'); } }
        }

        // --- Rating Change & Overall Update (Original) ---
        function handleRatingChange(event) { /* ... Keep original function ... */
            if (event.target.type === 'radio' && event.target.closest('.rating-option')) { const clickedLabel = event.target.closest('.rating-option'); const ratingScale = clickedLabel.closest('.rating-scale'); if (ratingScale) { ratingScale.querySelectorAll('.rating-option').forEach(label => { label.classList.toggle('selected', label.querySelector('input[type="radio"]').checked); }); } updateOverallPerformance(); }
        }
        function updateOverallPerformance() { /* ... Keep original function ... */
             if (!overallPerformanceText) return; if (!currentFormType || !allMetricsData[currentFormType]) { overallPerformanceText.textContent = "Select form type."; return; } const currentMetrics = allMetricsData[currentFormType]; const ratings = []; let allRated = true; currentMetrics.forEach((metric, index) => { const radioName = `rating-${currentFormType.replace(/\s+/g, '-')}-${index}`; const selectedRating = metricsContainer?.querySelector(`input[name="${radioName}"]:checked`); if (selectedRating) ratings.push(parseInt(selectedRating.value)); else allRated = false; }); if (currentMetrics.length === 0) { overallPerformanceText.textContent = "No metrics defined."; } else if (allRated) { const average = ratings.reduce((a, b) => a + b, 0) / ratings.length; const roundedAverage = Math.round(average); const description = RATING_DESCRIPTIONS[roundedAverage] || "Unknown"; overallPerformanceText.textContent = `Overall Performance Rating: ${description} (${average.toFixed(1)})`; } else { overallPerformanceText.textContent = "Please rate all metrics."; }
        }

        // --- Date Formatting (Original) ---
        function formatDate_DDMMMYYYY(dateString) { /* ... Keep original function ... */
            if (!dateString) return null; try { const [year, month, day] = dateString.split('-').map(Number); const date = new Date(Date.UTC(year, month - 1, day)); if (isNaN(date.getTime())) return null; const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]; return `${String(date.getUTCDate()).padStart(2, '0')}/${monthNames[date.getUTCMonth()]}/${date.getUTCFullYear()}`; } catch (e) { console.error("Date format error:", e); return null; }
        }

        // --- SAVE PROCESS (PDF Quality & Time Modifications) ---
        function downloadAndSave() { /* ... Keep original ... */
            const downloadBtn = document.querySelector('.ac-download-button'); console.log("Initiating download and save..."); if (!validateForm()) { console.log("Validation failed."); return; } const formData = collectFormData(); if (!formData) { alert("Error collecting data."); return; } console.log("Form data collected."); setButtonLoading(downloadBtn, true); downloadPDF_noCallback(() => { console.log("PDF process done, sending data..."); sendDataToSheet(formData); setButtonLoading(downloadBtn, false); });
        }

        // --- MODIFIED collectFormData (Requirement IV & V) ---
        function collectFormData() {
            console.log("--- Starting collectFormData ---");
            if (!currentFormType) { alert("Error: Form type missing."); return null; }
            try {
                 const getVal = (id) => document.getElementById(id)?.value || '';
                 const formData = {
                     // --- Keys must EXACTLY match the 'headers' array in Apps Script ---
                     "Review Date Formatted": formatDate_DDMMMYYYY(getVal("review-date-header")) || "",
                     "Employee ID": getVal("emp-number"),
                     "Employee Name": getVal("emp-name"),
                     "Position Text": getVal("position-text"),
                     "Employee Group": getVal("emp-group"),
                     "Division Text": getVal("division-text"),
                     "Department Text": getVal("department-text"),
                     "Email ID": getVal("email"),
                     "Contact Number": getVal("contact"),
                     "Reviewer Emp ID": getVal("reviewer-number"),
                     "Reviewer Name": getVal("reviewer-name"),
                     // Ratings and comments... loop ensures keys match headers like "Rating1", "Employee Comments1" etc.
                     "Overall Remarks / Comments": getVal("remarks"),
                     "First Witness Details": `ID: ${getVal("employee-number-2")}, Name: ${getVal("employee-name-2")}, Position: ${getVal("position-2")}`,
                     "Second Witness Details": `ID: ${getVal("employee-number-3")}, Name: ${getVal("employee-name-3")}, Position: ${getVal("position-3")}`,
                     "Reviewer Emp ID (Signature)": getVal("reviewer-number-signature"),
                     "Reviewer Name (Signature)": getVal("reviewer-name-signature"),
                     "Reviewer Position (Signature)": getVal("reviewer-position-signature"),
                     "HOD Emp ID": getVal("hod-number"),
                     "HOD Name": getVal("hod-name"),
                     "HOD Position": getVal("hod-position"),
                     "Form Name": currentFormType, // Requirement IV: Add Form Name explicitly
                     "User Login by": loggedInUsername || 'Unknown' // Requirement V: Add logged in user
                     // Note: "Evaluation Type" key is removed as "Form Name" is used now
                     // Note: "Review Date (YYYY-MM-DD)" key is removed as "Review Date Formatted" is used now
                 };

                 // Loop for Ratings and Comments
                 const currentMetrics = allMetricsData[currentFormType] || [];
                 for (let i = 0; i < MAX_METRICS; i++) {
                     const metricNumber = i + 1;
                     const ratingKey = `Rating${metricNumber}`;
                     const empCommentKey = `Employee Comments${metricNumber}`;
                     const hrCommentKey = `HR Comments${metricNumber}`;

                     if (i < currentMetrics.length && metricsContainer) {
                         const radioName = `rating-${currentFormType.replace(/\s+/g, '-')}-${i}`;
                         const commentId = `comments-${currentFormType.replace(/\s+/g, '-')}-${i}`;
                         const hrCommentId = `hr-comments-${currentFormType.replace(/\s+/g, '-')}-${i}`;
                         const selectedRadio = metricsContainer.querySelector(`input[name="${radioName}"]:checked`);
                         formData[ratingKey] = selectedRadio ? parseInt(selectedRadio.value) : "";
                         formData[empCommentKey] = document.getElementById(commentId)?.value || '';
                         formData[hrCommentKey] = document.getElementById(hrCommentId)?.value || '';
                     } else {
                         // Ensure keys exist even if no metric, matching Apps Script headers
                         formData[ratingKey] = "";
                         formData[empCommentKey] = "";
                         formData[hrCommentKey] = "";
                     }
                 }

                 // Overall Performance
                 if (overallPerformanceText) {
                     formData["Overall Performance"] = overallPerformanceText.textContent;
                     const match = overallPerformanceText.textContent.match(/Rating: (.+?)(?: \()/);
                     formData["Overall Rating"] = match ? match[1].trim() : (overallPerformanceText.textContent.includes("Please rate") ? "" : overallPerformanceText.textContent);
                 } else {
                     formData["Overall Performance"] = "";
                     formData["Overall Rating"] = "";
                 }

                 console.log("--- End collectFormData --- Data:", formData); // Log collected data
                 return formData;
            } catch (error) {
                 console.error("Error collecting data:", error);
                 alert("Error collecting form data. Check console.");
                 return null;
            }
        }


        function downloadPDF_noCallback(onComplete) { /* ... Keep original PDF Generation ... */
            console.log("Preparing PDF (High Quality)...");
            const element = document.getElementById("form-container");
            if (!element) { if (onComplete) onComplete(); return; }

            const downloadButton = element.querySelector('.ac-download-button');
            const backButtonEvalList = element.querySelector('button[onclick="showEvaluationPage()"]');
            const signatureDatePlaceholders = element.querySelectorAll('.approval-signature-table input.signature-date-input');

            let originalDlButtonDisplay = downloadButton ? downloadButton.style.display : '';
            let originalBackButtonDisplay = backButtonEvalList ? backButtonEvalList.style.display : '';
            const originalSignatureValues = [];
            signatureDatePlaceholders.forEach((input, index) => { originalSignatureValues[index] = input.value; });
            const originallyCollapsedMetrics = [];
            if (metricsContainer) {
                metricsContainer.querySelectorAll('.performance-feedback:not(.expanded)').forEach(item => {
                    originallyCollapsedMetrics.push(item); item.classList.add('expanded');
                    const indicator = item.querySelector('.metric-indicator');
                    if (indicator) { indicator.classList.remove('fa-chevron-down'); indicator.classList.add('fa-chevron-up'); }
                });
            }

            if (downloadButton) downloadButton.style.display = 'none';
            if (backButtonEvalList) backButtonEvalList.style.display = 'none';
            signatureDatePlaceholders.forEach(input => { input.value = ''; });

            const safeFormType = currentFormType ? currentFormType.replace(/[^a-zA-Z0-9]/g, '_') : 'Form';
            const empIdForFilename = document.getElementById('emp-number')?.value || 'Employee';
            const filename = `${safeFormType}_Eval_${empIdForFilename}.pdf`;

            const now = new Date();
            const hours = now.getHours(); const minutes = now.getMinutes(); const ampm = hours >= 12 ? 'PM' : 'AM';
            const formattedHours = hours % 12 === 0 ? 12 : hours % 12; const formattedMinutes = minutes < 10 ? '0' + minutes : minutes;
            const currentTime = `${formattedHours}:${formattedMinutes} ${ampm}`;
            const footerDate = formatDate_DDMMMYYYY(document.getElementById('review-date-header')?.value) || 'No Date';
            const footerTextRight = `${empIdForFilename} / ${footerDate} / ${currentTime}`;

            const opt = {
                margin: [10, 5, 12, 5], filename: filename,
                image: { type: 'jpeg', quality: 1.0 },
                html2canvas: { scale: 3.5, dpi: 300, useCORS: true, letterRendering: true, logging: false, backgroundColor: '#ffffff', removeContainer: true },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' },
                pagebreak: { mode: ['css', 'avoid-all', 'legacy'] }
            };

            console.log("Generating PDF with high quality options..."); console.log("Footer text:", footerTextRight);

            html2pdf().from(element).set(opt).toPdf().get('pdf').then(function (pdf) {
                console.log("Adding footer..."); const totalPages = pdf.internal.getNumberOfPages(); const footerFontSize = 8; const pageHeight = pdf.internal.pageSize.getHeight(); const pageWidth = pdf.internal.pageSize.getWidth(); const footerYPosition = pageHeight - (opt.margin[2] / 2) - 1; const rightMargin = opt.margin[3] || 5;
                for (let i = 1; i <= totalPages; i++) { pdf.setPage(i); pdf.setFontSize(footerFontSize); pdf.setTextColor(100, 100, 100); const pageText = `Page ${i} of ${totalPages}`; const pageTextWidth = pdf.getStringUnitWidth(pageText) * footerFontSize / pdf.internal.scaleFactor; pdf.text(pageText, (pageWidth - pageTextWidth) / 2, footerYPosition); const rightTextWidth = pdf.getStringUnitWidth(footerTextRight) * footerFontSize / pdf.internal.scaleFactor; pdf.text(footerTextRight, pageWidth - rightTextWidth - rightMargin, footerYPosition); }
                return pdf;
            }).save().then(() => {
                 console.log("PDF saved."); restoreElementsAfterPDF(downloadButton, backButtonEvalList, signatureDatePlaceholders, originalDlButtonDisplay, originalBackButtonDisplay, originalSignatureValues, originallyCollapsedMetrics); if (onComplete) setTimeout(onComplete, 50);
            }).catch(err => {
                console.error("PDF Error:", err); alert("Failed to generate PDF. Data saving will still proceed."); restoreElementsAfterPDF(downloadButton, backButtonEvalList, signatureDatePlaceholders, originalDlButtonDisplay, originalBackButtonDisplay, originalSignatureValues, originallyCollapsedMetrics); if (onComplete) setTimeout(onComplete, 50);
            });
        }

        function restoreElementsAfterPDF(dlBtn, backBtn, sigInputs, origDlDisp, origBackDisp, origSigVals, collapsedMetrics) { /* ... Keep original ... */
             if (dlBtn) { dlBtn.style.display = origDlDisp; setButtonLoading(dlBtn, false); }
             if (backBtn) backBtn.style.display = origBackDisp;
             sigInputs.forEach((input, index) => { input.value = origSigVals[index] || ''; });
             collapsedMetrics.forEach(item => { item.classList.remove('expanded'); const indicator = item.querySelector('.metric-indicator'); if (indicator) { indicator.classList.remove('fa-chevron-up'); indicator.classList.add('fa-chevron-down'); } });
        }

        function sendDataToSheet(formData) { /* ... Keep original function ... */
            if (!formData) { alert("Cannot save: Form data missing."); return; } console.log("--- Sending data to Google Apps Script ---"); fetch(APPS_SCRIPT_URL, { method: "POST", headers: { "Content-Type": "text/plain", }, body: JSON.stringify(formData), mode: 'no-cors' }).then(response => { console.log("Data send request initiated (no-cors)."); alert("PDF downloaded (or attempted) and data saving initiated successfully!"); clearAllFormInputs(); }).catch(error => { console.error("Fetch Error sending data:", error); alert(`NETWORK ERROR sending data: ${error.message}. Data NOT saved. Form not cleared.`); setButtonLoading(document.querySelector('.ac-download-button'), false); });
        }

        // --- VALIDATION FUNCTIONS (Original) ---
        function validateForm() { /* ... Keep original function ... */
            let isValid = true; let firstErrorElement = null; resetHighlightedFields(); console.log("Starting validation..."); const requiredInputs = document.querySelectorAll('#evaluation-form-container .required:not(#email)'); requiredInputs.forEach(input => { let isFieldValid = true; const fieldLabel = input.closest('td')?.previousElementSibling?.textContent || input.closest('.ac-review-date-area')?.querySelector('.ac-review-date-label')?.textContent || input.closest('div')?.querySelector('label')?.textContent || input.id || 'Field'; if (input.id === 'review-date-header') { if (!flatpickrInstance || flatpickrInstance.selectedDates.length === 0) isFieldValid = false; } else if (input.tagName === 'TEXTAREA') { if (!input.value.trim()) isFieldValid = false; } else { if (!input.value.trim()) isFieldValid = false; } if (!isFieldValid) { isValid = false; const fieldToHighlight = (input.id === 'review-date-header') ? input.nextElementSibling /* Highlight flatpickr's visible input */ : input; highlightField(fieldToHighlight); if (!firstErrorElement) firstErrorElement = fieldToHighlight; console.warn(`Validation failed: '${fieldLabel.replace(/[:*]/g,'').trim()}' empty.`); } });
            if (currentFormType && allMetricsData[currentFormType] && metricsContainer) { const currentMetrics = allMetricsData[currentFormType]; currentMetrics.forEach((metric, index) => { const metricItem = metricsContainer.querySelector(`.performance-feedback:nth-of-type(${index + 1})`); if (metricItem) { const radioName = `rating-${currentFormType.replace(/\s+/g, '-')}-${index}`; const commentId = `comments-${currentFormType.replace(/\s+/g, '-')}-${index}`; const metricTitleToggle = metricItem.querySelector('.metric-toggle'); const selectedRating = metricItem.querySelector(`input[name="${radioName}"]:checked`); const employeeComments = metricItem.querySelector(`#${commentId}`); const ratingContainer = metricItem.querySelector('.metric-rating-box'); let metricValid = true; if (!selectedRating) { isValid = false; metricValid = false; if (ratingContainer) highlightField(ratingContainer); if (!firstErrorElement) firstErrorElement = ratingContainer || metricTitleToggle; console.warn(`Validation failed: Rating missing metric ${index + 1}`); } if (employeeComments && !employeeComments.value.trim()) { isValid = false; metricValid = false; highlightField(employeeComments); if (!firstErrorElement) firstErrorElement = employeeComments; console.warn(`Validation failed: Comment missing metric ${index + 1}`); } if (!metricValid && !metricItem.classList.contains('expanded')) { metricItem.classList.add('expanded'); const indicator = metricTitleToggle?.querySelector('.metric-indicator'); if (indicator) { indicator.classList.remove('fa-chevron-down'); indicator.classList.add('fa-chevron-up'); } if (metricTitleToggle) { highlightField(metricTitleToggle); if (!firstErrorElement) firstErrorElement = metricTitleToggle; } } } }); }
            if (!isValid) { alert("Please fill in all highlighted required fields (*), including ratings and employee comments for each metric."); if (firstErrorElement) { try { const targetElement = firstErrorElement.classList.contains('metric-rating-box') ? firstErrorElement.querySelector('input[type=radio]') || firstErrorElement : firstErrorElement; targetElement.scrollIntoView({ behavior: 'smooth', block: 'center' }); let focusTarget = null; if (['INPUT', 'TEXTAREA', 'SELECT'].includes(targetElement.tagName) && targetElement.type !== 'hidden' && targetElement.type !== 'radio') { focusTarget = targetElement; } else { focusTarget = targetElement.querySelector('input:not([type="hidden"]):not([type="radio"]), textarea, select'); } if (focusTarget && focusTarget !== document.activeElement) { setTimeout(() => { try { focusTarget.focus({ preventScroll: true }); } catch (e) { console.warn("Focus failed:", e); } }, 150); } } catch (e) { console.error("Scroll/focus error:", e); } } } else { console.log("Validation passed."); } return isValid;
        }
        function highlightField(element) { if(element) element.classList.add("highlighted"); }
        function resetHighlightedFields() { document.querySelectorAll('#evaluation-form-container .highlighted').forEach(el => el.classList.remove('highlighted')); }

        // --- FETCH & PARSE DATA (Original) ---
        function fetchEmployeeData() { /* ... Keep original ... */ console.log("Fetching Employee Data..."); return fetch(GOOGLE_SHEETS_URL).then(response => { if (!response.ok) throw new Error(`Network error (Emp): ${response.statusText}`); return response.text(); }).then(csvData => { employeeData = parseCSV(csvData); console.log(`Employee data: ${employeeData.length} records.`); return employeeData; }).catch(error => { console.error("Fetch Emp Error:", error); alert(`Failed to load employee data: ${error.message}`); employeeData = []; }); }
        function fetchUserData() { /* ... Keep original ... */ console.log("Fetching User Data..."); return fetch(USERS_GOOGLE_SHEETS_URL).then(response => { if (!response.ok) throw new Error(`Network error (User): ${response.statusText}`); return response.text(); }).then(csvData => { userData = parseUsersCSV(csvData); console.log(`User data: ${userData.length} records.`); return userData; }).catch(error => { console.error("Fetch User Error:", error); alert(`Failed to load user data: ${error.message}`); userData = []; }); }
        function parseCSV(csv) { /* ... Keep original ... */ const lines = csv.split(/[\r\n]+/).filter(line => line.trim() !== ''); if (lines.length < 1) return []; const headers = lines[0].split(",").map(h => h.trim()); const result = []; for (let i = 1; i < lines.length; i++) { const obj = {}; const currentLine = lines[i].split(","); if (currentLine && currentLine.length >= headers.length) { headers.forEach((h, j) => obj[h] = currentLine[j]?.trim() ?? ""); result.push(obj); } else if (lines[i]?.trim()) { console.warn(`Skip Emp line ${i + 1}`); } } return result; }
        function parseUsersCSV(csv) { /* ... Keep original ... */ const lines = csv.split(/[\r\n]+/).filter(line => line.trim() !== ''); if (lines.length < 1) return []; const headers = lines[0].split(',').map(h => h.trim()); const users = []; for (let i = 1; i < lines.length; i++) { const data = lines[i].split(','); if (data && data.length >= headers.length) { const user = {}; headers.forEach((h, j) => user[h] = data[j]?.trim() ?? ''); users.push(user); } else if (lines[i]?.trim()) { console.warn(`Skip User line ${i + 1}`); } } return users; }

        // --- Populate Functions (MODIFIED to use Spinners) ---
        function populateEmployeeDetails(empNumber) { /* ... Keep original ... */ showSpinner('emp-spinner'); clearEmployeeFields(); if (!employeeData?.length || !currentFormType) { hideSpinner('emp-spinner'); return; } const length = empNumber.length; if (length !== 3 && length !== 6) { hideSpinner('emp-spinner'); return; } setTimeout(() => { const employee = employeeData.find(emp => emp?.["Employee Number"] === empNumber); if (employee) { const targetForm = currentFormType; const app1 = employee["Forms applicability 1"]?.trim() || ""; const app2 = employee["Forms applicability 2"]?.trim() || ""; const app3 = employee["Forms applicability 3"]?.trim() || ""; if (app1 === targetForm || app2 === targetForm || app3 === targetForm) { if(employeeNameInput) employeeNameInput.value = employee["Employee Name"] || ""; if(positionTextInput) positionTextInput.value = employee["Position Text"] || ""; if(employeeGroupInput) employeeGroupInput.value = employee["Employee Group"] || ""; if(divisionTextInput) divisionTextInput.value = employee["Division"] || ""; if(departmentTextInput) departmentTextInput.value = employee["Department"] || ""; if(emailInput) emailInput.value = employee["Email ID"] || ""; if(contactInput) contactInput.value = employee["Contact Number"] || ""; const empNumSig = document.getElementById("employee-number-signature"); const empNameSig = document.getElementById("employee-name-signature"); const empPosSig = document.getElementById("position-signature"); if(empNumSig) empNumSig.value = empNumber; if(empNameSig) empNameSig.value = employee["Employee Name"] || ""; if(empPosSig) empPosSig.value = employee["Position Text"] || ""; } else { alert(`Employee ${empNumber} (${employee["Employee Name"] || 'N/A'}) not applicable for ${targetForm}.`); if (employeeNumberInput) employeeNumberInput.value = ''; clearEmployeeFields(); } } else { if (length === 6) { alert(`Employee ${empNumber} not found.`); clearEmployeeFields(); } } hideSpinner('emp-spinner'); }, 10); }
        function populateReviewerDetails(reviewerNumber) { /* ... Keep original ... */ showSpinner('reviewer-spinner'); clearReviewerFields(); if (!reviewerNumber || reviewerNumber.length !== 6 || !employeeData?.length || !reviewerNumberInput || !reviewerNameInput) { hideSpinner('reviewer-spinner'); return false; } setTimeout(() => { const reviewer = employeeData.find(e => e?.["Employee Number"] === reviewerNumber); let success = false; if (reviewer) { const empNo = employeeNumberInput?.value || ''; if (reviewerNumber === empNo && empNo) { alert("Reviewer cannot be employee."); reviewerNumberInput.value = ""; clearReviewerFields(); } else { reviewerNameInput.value = reviewer["Employee Name"] || ""; const revNumSig = document.getElementById("reviewer-number-signature"); const revNameSig = document.getElementById("reviewer-name-signature"); const revPosSig = document.getElementById("reviewer-position-signature"); if(revNumSig) revNumSig.value = reviewerNumber; if(revNameSig) revNameSig.value = reviewer["Employee Name"] || ""; if(revPosSig) revPosSig.value = reviewer["Position Text"] || ""; success = true; } } else { alert(`Reviewer ID ${reviewerNumber} not found.`); clearReviewerFields(); } hideSpinner('reviewer-spinner'); return success; }, 10); }
        function populateSignatureDetails(witnessNumber, witnessNumberInputId, nameInputId, positionInputId, spinnerId) { /* ... Keep original ... */ showSpinner(spinnerId); const nameInput = document.getElementById(nameInputId); const posInput = document.getElementById(positionInputId); const witnessInput = document.getElementById(witnessNumberInputId); if (nameInput) nameInput.value = ""; if (posInput) posInput.value = ""; if (!witnessNumber || witnessNumber.length !== 6 || !employeeData?.length || !nameInput || !posInput || !witnessInput) { hideSpinner(spinnerId); return false; } setTimeout(() => { const witnessLabel = nameInputId.includes("2") ? "Witness 1" : "Witness 2"; let success = false; const mainEmpNo = employeeNumberInput?.value || ''; const reviewerNo = reviewerNumberInput?.value || ''; const witness2No = witness2NumberInput?.value || ''; const witness3No = witness3NumberInput?.value || ''; let validationError = ""; if (witnessNumber === mainEmpNo && mainEmpNo) validationError = `${witnessLabel} != employee.`; else if (witnessNumber === reviewerNo && reviewerNo) validationError = `${witnessLabel} != reviewer.`; else if (witnessLabel === "Witness 1" && witnessNumber === witness3No && witness3No) validationError = "Witnesses != same."; else if (witnessLabel === "Witness 2" && witnessNumber === witness2No && witness2No) validationError = "Witnesses != same."; if (validationError) { alert(validationError); witnessInput.value = ''; nameInput.value = ''; posInput.value = ''; } else { const employee = employeeData.find(emp => emp?.["Employee Number"] === witnessNumber); if (employee) { nameInput.value = employee["Employee Name"] || ""; posInput.value = employee["Position Text"] || ""; success = true; } else { alert(`${witnessLabel} ID ${witnessNumber} not found.`); nameInput.value = ''; posInput.value = ''; } } hideSpinner(spinnerId); return success; }, 10); }
        function populateHODDetails(hodNumber) { /* ... Keep original ... */ showSpinner('hod-spinner'); clearHODFields(); if (!hodNameInput || !hodPosInput || !hodNumberInput || !hodNumber || hodNumber.length !== 6 || !employeeData?.length) { hideSpinner('hod-spinner'); return false; } setTimeout(() => { const mainEmpNo = employeeNumberInput?.value || ''; const reviewerNo = reviewerNumberInput?.value || ''; const witness2No = witness2NumberInput?.value || ''; const witness3No = witness3NumberInput?.value || ''; let validationError = ""; let success = false; if (hodNumber === mainEmpNo && mainEmpNo) validationError = "HOD != employee."; else if (hodNumber === reviewerNo && reviewerNo) validationError = "HOD != reviewer."; else if (hodNumber === witness2No && witness2No) validationError = "HOD != Witness 1."; else if (hodNumber === witness3No && witness3No) validationError = "HOD != Witness 2."; if (validationError) { alert(validationError); hodNumberInput.value = ''; clearHODFields(); } else { const employee = employeeData.find(emp => emp?.["Employee Number"] === hodNumber); if (employee) { hodNameInput.value = employee["Employee Name"] || ""; hodPosInput.value = employee["Position Text"] || ""; success = true; } else { alert(`HOD ID ${hodNumber} not found.`); clearHODFields(); } } hideSpinner('hod-spinner'); return success; }, 10); }

        // --- Event Listeners Setup (MODIFIED for Flatpickr & Spinners) ---
        function setupEventListeners() { /* ... Keep most original, check essentials ... */
            console.log("Setting up listeners...");
            employeeNumberInput = document.getElementById("emp-number"); employeeNameInput = document.getElementById("emp-name"); positionTextInput = document.getElementById("position-text"); employeeGroupInput = document.getElementById("emp-group"); divisionTextInput = document.getElementById("division-text"); departmentTextInput = document.getElementById("department-text"); emailInput = document.getElementById("email"); contactInput = document.getElementById("contact");
            reviewerNumberInput = document.getElementById("reviewer-number"); reviewerNameInput = document.getElementById("reviewer-name");
            witness2NumberInput = document.getElementById("employee-number-2"); witness2NameInput = document.getElementById("employee-name-2"); witness2PosInput = document.getElementById("position-2");
            witness3NumberInput = document.getElementById("employee-number-3"); witness3NameInput = document.getElementById("employee-name-3"); witness3PosInput = document.getElementById("position-3");
            hodNumberInput = document.getElementById("hod-number"); hodNameInput = document.getElementById("hod-name"); hodPosInput = document.getElementById("hod-position");
            metricsContainer = document.getElementById("performance-metrics"); overallPerformanceText = document.getElementById("overall-performance");
            loginMessageElement = document.getElementById('login-message'); loginContainerElement = document.getElementById('login-container'); welcomeMessageContainerElement = document.getElementById('welcome-message-container'); passwordInputElement = document.getElementById('password'); usernameInputElement = document.getElementById('username');
            evaluationPageElement = document.getElementById('evaluation-page'); evaluationFormContainerElement = document.getElementById('evaluation-form-container'); welcomePageElement = document.getElementById('welcome-page');
            reviewDateInput = document.getElementById("review-date-header");
            formTypeIndicatorSpan = document.getElementById("form-type-indicator");
            empSpinner = document.getElementById("emp-spinner"); reviewerSpinner = document.getElementById("reviewer-spinner"); witness1Spinner = document.getElementById("witness1-spinner"); witness2Spinner = document.getElementById("witness2-spinner"); hodSpinner = document.getElementById("hod-spinner");

            if (!employeeNumberInput || !reviewerNumberInput || !witness2NumberInput || !witness3NumberInput || !hodNumberInput || !passwordInputElement || !usernameInputElement || !metricsContainer || !reviewDateInput || !formTypeIndicatorSpan || !empSpinner || !reviewerSpinner || !witness1Spinner || !witness2Spinner || !hodSpinner || !loginContainerElement || !welcomeMessageContainerElement || !evaluationPageElement || !evaluationFormContainerElement || !welcomePageElement) { console.error("CRITICAL: Essential DOM elements missing."); alert("Initialization Error. Refresh the page."); return; }

            // --- Initialize Flatpickr ---
            flatpickrInstance = flatpickr(reviewDateInput, { altInput: true, altFormat: "d/M/Y", dateFormat: "Y-m-d", allowInput: false });
            console.log("Flatpickr initialized.");

            // --- Input Listeners ---
            employeeNumberInput.addEventListener("input", function() { this.value = this.value.replace(/[^0-9]/g, ''); clearTimeout(empLookupTimeout); if (this.value.length === 0 || (this.value.length > 0 && this.value.length < 3) || (this.value.length > 3 && this.value.length < 6) ) { clearEmployeeFields(); } });
            employeeNumberInput.addEventListener("keyup", function() { clearTimeout(empLookupTimeout); const n = this.value.trim(); if (n.length === 3 || n.length === 6) { empLookupTimeout = setTimeout(() => { populateEmployeeDetails(n); }, LOOKUP_DELAY); } });
            employeeNumberInput.addEventListener("blur", function() { clearTimeout(empLookupTimeout); const n = this.value.trim(); if (n.length === 3 || n.length === 6) { populateEmployeeDetails(n); } else if (n.length > 0) { alert("Emp# must be 3/6 digits."); clearEmployeeFields(); } else { clearEmployeeFields(); } });

            reviewerNumberInput.addEventListener("input", function() { this.value = this.value.replace(/[^0-9]/g, ''); clearTimeout(reviewerLookupTimeout); if (this.value.length < 6) clearReviewerFields(); });
            reviewerNumberInput.addEventListener("keyup", function() { clearTimeout(reviewerLookupTimeout); const n = this.value.trim(); if (n.length === 6) { reviewerLookupTimeout = setTimeout(() => { populateReviewerDetails(n); }, LOOKUP_DELAY); } });
            reviewerNumberInput.addEventListener("blur", function() { clearTimeout(reviewerLookupTimeout); const n = this.value.trim(); if (n.length === 6) { populateReviewerDetails(n); } else if (n.length > 0) { alert("Reviewer ID must be 6 digits."); clearReviewerFields(); } else { clearReviewerFields(); } });

            witness2NumberInput.addEventListener("input", function() { this.value = this.value.replace(/[^0-9]/g, ''); clearTimeout(witness2LookupTimeout); if (this.value.length < 6) clearWitness2Fields(); });
            witness2NumberInput.addEventListener("keyup", function() { clearTimeout(witness2LookupTimeout); const n = this.value.trim(); if (n.length === 6) { witness2LookupTimeout = setTimeout(() => { populateSignatureDetails(n, 'employee-number-2', "employee-name-2", "position-2", 'witness1-spinner'); }, LOOKUP_DELAY); } });
            witness2NumberInput.addEventListener("blur", function() { clearTimeout(witness2LookupTimeout); const n = this.value.trim(); if (n.length === 6) { populateSignatureDetails(n, 'employee-number-2', "employee-name-2", "position-2", 'witness1-spinner'); } else if (n.length > 0) { alert("Witness 1 ID must be 6 digits."); clearWitness2Fields(); } else { clearWitness2Fields(); } });

            witness3NumberInput.addEventListener("input", function() { this.value = this.value.replace(/[^0-9]/g, ''); clearTimeout(witness3LookupTimeout); if (this.value.length < 6) clearWitness3Fields(); });
            witness3NumberInput.addEventListener("keyup", function() { clearTimeout(witness3LookupTimeout); const n = this.value.trim(); if (n.length === 6) { witness3LookupTimeout = setTimeout(() => { populateSignatureDetails(n, 'employee-number-3', "employee-name-3", "position-3", 'witness2-spinner'); }, LOOKUP_DELAY); } });
            witness3NumberInput.addEventListener("blur", function() { clearTimeout(witness3LookupTimeout); const n = this.value.trim(); if (n.length === 6) { populateSignatureDetails(n, 'employee-number-3', "employee-name-3", "position-3", 'witness2-spinner'); } else if (n.length > 0) { alert("Witness 2 ID must be 6 digits."); clearWitness3Fields(); } else { clearWitness3Fields(); } });

            hodNumberInput.addEventListener("input", function() { this.value = this.value.replace(/[^0-9]/g, ''); clearTimeout(hodLookupTimeout); if (this.value.length < 6) clearHODFields(); });
            hodNumberInput.addEventListener("keyup", function() { clearTimeout(hodLookupTimeout); const n = this.value.trim(); if (n.length === 6) { hodLookupTimeout = setTimeout(() => { populateHODDetails(n); }, LOOKUP_DELAY); } });
            hodNumberInput.addEventListener("blur", function() { clearTimeout(hodLookupTimeout); const n = this.value.trim(); if (n.length === 6) { populateHODDetails(n); } else if (n.length > 0) { alert("HOD ID must be 6 digits."); clearHODFields(); } else { clearHODFields(); } });

             const handleLoginEnter = (event) => { if (event.key === 'Enter') { event.preventDefault(); const loginBtn = document.querySelector('.login-button'); if(!loginBtn.disabled) authenticateUser(); } };
             passwordInputElement.addEventListener('keydown', handleLoginEnter); usernameInputElement.addEventListener('keydown', handleLoginEnter);

             console.log("Event listeners setup complete.");
        }

        // --- Initial data fetch & DOM Ready ---
        document.addEventListener('DOMContentLoaded', () => {
            console.log("DOM fully loaded.");
            setupEventListeners();
            Promise.all([fetchEmployeeData(), fetchUserData()])
                .then(() => { console.log("Initial data fetch complete."); })
                .catch(error => { console.error("CRITICAL: Initial data fetch failed:", error); alert("Error loading initial data. Please refresh."); });

             // Set initial page visibility (Requirement II)
             if (welcomePageElement) welcomePageElement.style.display = 'block'; else console.error("Welcome page not found on DOM ready");
             if (evaluationPageElement) evaluationPageElement.style.display = 'none';
             if (evaluationFormContainerElement) evaluationFormContainerElement.style.display = 'none';
             if (welcomeMessageContainerElement) welcomeMessageContainerElement.style.display = 'none';

             // Apply initial state for transition
             requestAnimationFrame(() => {
                 if(welcomePageElement) {
                    welcomePageElement.style.opacity = '1';
                    welcomePageElement.style.transform = 'scale(1)';
                 }
                 // Ensure others are fully hidden and reset
                 if(evaluationPageElement) { evaluationPageElement.style.opacity = '0'; evaluationPageElement.style.transform = 'scale(0.98)'; }
                 if(evaluationFormContainerElement) { evaluationFormContainerElement.style.opacity = '0'; evaluationFormContainerElement.style.transform = 'scale(0.98)'; }
             });

             document.body.classList.add('gradient-background');
        });

        // --- Authentication (with Button Loading State & User Capture) ---
        window.authenticateUser = function() {
             const loginBtn = document.querySelector('.login-button');
             if (!loginMessageElement || !loginContainerElement || !welcomeMessageContainerElement || !usernameInputElement || !passwordInputElement || !loginBtn) return;

             setButtonLoading(loginBtn, true);
             loginMessageElement.textContent = ''; loginMessageElement.className = ''; loginMessageElement.style.display = 'none';

             setTimeout(() => {
                 if (!userData?.length) {
                     loginMessageElement.textContent = "Auth data unavailable. Try refreshing."; loginMessageElement.className = 'error'; loginMessageElement.style.display = 'flex';
                     setButtonLoading(loginBtn, false);
                     return;
                 }
                 const username = usernameInputElement.value.trim(); const password = passwordInputElement.value;
                 if (!username || !password) { loginMessageElement.textContent = 'Username and Password required.'; loginMessageElement.className = 'error'; loginMessageElement.style.display = 'flex'; setButtonLoading(loginBtn, false); return; }
                 const user = userData.find(u => u?.['User ID'] === username);
                 if (!user) { loginMessageElement.textContent = 'User not found.'; loginMessageElement.className = 'error'; loginMessageElement.style.display = 'flex'; setButtonLoading(loginBtn, false); return; }

                 if (user['Password'] === password) {
                     console.log(`Login OK: ${username}`);
                     loggedInUsername = username; // Requirement V: Store username
                     loginMessageElement.textContent = 'Login successful!'; loginMessageElement.className = 'success'; loginMessageElement.style.display = 'flex';

                     setTimeout(() => {
                         showWelcomeMessage(); // Handles transition
                         setButtonLoading(loginBtn, false);
                     }, 600); // Delay allows success message to show briefly

                 } else {
                     loginMessageElement.textContent = 'Password incorrect.'; loginMessageElement.className = 'error'; loginMessageElement.style.display = 'flex';
                     setButtonLoading(loginBtn, false);
                 }
            }, 50);
         }

        // --- Show Welcome Message (MODIFIED for Transitions - Requirement II) ---
        function showWelcomeMessage() {
            if (loginMessageElement) loginMessageElement.style.display = 'none'; // Hide message first
            // Hide login container with transition
            hidePage(loginContainerElement, () => {
                // After login container is hidden, show welcome message container
                if (welcomeMessageContainerElement) {
                    welcomeMessageContainerElement.style.display = 'flex'; // Needs flex for centering
                    // Use the existing animation, no need for showPage() here
                }
                document.querySelectorAll('.background-panel').forEach(p => p.style.display = 'none');
            });
            document.body.classList.add('gradient-background');
        }

        // --- END JAVASCRIPT --- //
    </script>

</body>
</html>
